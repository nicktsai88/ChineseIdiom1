<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº’å‹•å¼æˆèªå¤§å¸« (Debugç‰ˆ)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body { font-family: "Noto Sans TC", system-ui, sans-serif; background-color: #f3f4f6; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        @keyframes pop { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
        .animate-pop { animation: pop 0.3s ease-in-out; }
        @keyframes fade-in-up { 0% { opacity: 0; transform: translateY(10px); } 100% { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fade-in-up 0.5s ease-out forwards; }
        
        /* Loading Spinner */
        .loader {
            border: 3px solid #e0e7ff; border-radius: 50%; border-top: 3px solid #6366f1;
            width: 20px; height: 20px; animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;
        const ITEMS_PER_PAGE = 15;
        
        // ---------------------------------------------------------
        // â˜…â˜…â˜… è«‹åœ¨æ­¤è™•å¡«å…¥æ‚¨çš„ Google Gemini API Key â˜…â˜…â˜…
        // ---------------------------------------------------------
        const apiKey = "AIzaSyC_PNQoI-NA8lRyVTm649xLRaetwRRvcSU"; 
        // ---------------------------------------------------------

        // --- Sound Effect Helper ---
        const playSoundEffect = (type) => {
            try {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                if (!AudioContext) return;
                const ctx = new AudioContext();
                if (type === 'correct') {
                    const now = ctx.currentTime;
                    const osc1 = ctx.createOscillator(); const gain1 = ctx.createGain();
                    osc1.type = 'sine'; osc1.frequency.setValueAtTime(523.25, now);
                    gain1.gain.setValueAtTime(0.1, now); gain1.gain.exponentialRampToValueAtTime(0.001, now + 0.5);
                    osc1.connect(gain1); gain1.connect(ctx.destination); osc1.start(now); osc1.stop(now + 0.5);

                    const osc2 = ctx.createOscillator(); const gain2 = ctx.createGain();
                    osc2.type = 'sine'; osc2.frequency.setValueAtTime(659.25, now + 0.1);
                    gain2.gain.setValueAtTime(0.1, now + 0.1); gain2.gain.exponentialRampToValueAtTime(0.001, now + 0.6);
                    osc2.connect(gain2); gain2.connect(ctx.destination); osc2.start(now + 0.1); osc2.stop(now + 0.6);
                } else {
                    const now = ctx.currentTime;
                    const osc = ctx.createOscillator(); const gain = ctx.createGain();
                    osc.type = 'triangle'; osc.frequency.setValueAtTime(150, now); osc.frequency.exponentialRampToValueAtTime(50, now + 0.2);
                    gain.gain.setValueAtTime(0.15, now); gain.gain.exponentialRampToValueAtTime(0.001, now + 0.2);
                    osc.connect(gain); gain.connect(ctx.destination); osc.start(now); osc.stop(now + 0.2);
                }
            } catch (e) { console.error("Audio play failed", e); }
        };

        // --- API Helpers ---
        const fetchWithRetry = async (url, options, retries = 3, backoff = 1000) => {
            try {
                const response = await fetch(url, options);
                if (!response.ok) {
                    const errorText = await response.text();
                    const err = new Error(`HTTP error! status: ${response.status}`);
                    err.status = response.status;
                    err.body = errorText;
                    throw err;
                }
                return response;
            } catch (error) {
                if (retries === 0) throw error;
                await new Promise(r => setTimeout(r, backoff));
                return fetchWithRetry(url, options, retries - 1, backoff * 2);
            }
        };

        const generateImagePrompt = async (idiom, definition) => {
            if (!apiKey) { alert("è«‹å…ˆåœ¨ç¨‹å¼ç¢¼ä¸­è¨­å®š API Key æ‰èƒ½ç”Ÿæˆåœ–ç‰‡ï¼"); return null; }
            const systemPrompt = `
                You are an AI visual assistant. Create a visual concept for the idiom: "${idiom}" (Definition: ${definition}).
                The image must NOT contain text.
                Return ONLY a JSON object:
                {
                    "chineseDescription": "Short description in Traditional Chinese (max 40 chars)",
                    "englishPrompt": "Detailed flat vector illustration prompt, colorful, minimalistic, no text"
                }
            `;
            try {
                const response = await fetchWithRetry(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: systemPrompt }] }],
                            generationConfig: { responseMimeType: "application/json" }
                        })
                    }
                );
                const data = await response.json();
                let text = data.candidates?.[0]?.content?.parts?.[0]?.text;
                if (!text) return null;
                text = text.replace(/```json/g, '').replace(/```/g, '').trim();
                return JSON.parse(text);
            } catch (e) { 
                console.error("Prompt gen failed", e); 
                return null; 
            }
        };

        const generateImage = async (prompt) => {
            if (!apiKey) return null;
            try {
                const response = await fetchWithRetry(
                    `https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ instances: [{ prompt: prompt }], parameters: { sampleCount: 1 } })
                    }
                );
                const data = await response.json();
                if (data.predictions && data.predictions[0] && data.predictions[0].bytesBase64Encoded) {
                    return `data:image/png;base64,${data.predictions[0].bytesBase64Encoded}`;
                }
                return null;
            } catch (e) { 
                console.error("Image gen failed", e);
                throw e; // Throw to let outer catch handle it
            }
        };

        // Icons
        const icons = {
            check: <polyline points="20 6 9 17 4 12" />,
            play: <polygon points="5 3 19 12 5 21 5 3" />,
            book: <><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></>,
            menu: <><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></>,
            left: <polyline points="15 18 9 12 15 6"/>,
            heart: <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>,
            history: <><path d="M12 8v4l3 3"/><circle cx="12" cy="12" r="10"/></>,
            alert: <><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></>,
            trash: <><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></>,
            wand: <><path d="M15 4V2"/><path d="M15 16v-2"/><path d="M8 9h2"/><path d="M20 9h2"/><path d="M17.8 11.8 19 13"/><path d="M15 9h0"/><path d="M17.8 6.2 19 5"/><path d="m3 21 9-9"/><path d="M12.2 6.2 11 5"/></>,
            login: <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M15 12H3"/>,
            lightning: <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>,
            imageOff: <><line x1="1" y1="1" x2="23" y2="23"/><path d="M21 21l-9-9m-2-2l-6-6"/><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><line x1="3" y1="3" x2="21" y2="21"/></>
        };

        const Icon = ({ path, className, fill = "none" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{path}</svg>
        );

        // Data & Sentiment
        const getSentiment = (term) => {
            const posKeywords = ['ç¾', 'å–„', 'å¥½', 'æ­£', 'é«˜', 'å‚‘å‡º', 'å„ªç§€', 'å‹¤', 'å¿ ', 'å­', 'è³¢', 'å¾·', 'å‹‡', 'èª ', 'ä¿¡', 'æ•¬', 'æ„›', 'åŠ©', 'ç›Š', 'èˆˆ', 'ç››', 'ç¥¥', 'å’Œ', 'é‡‘', 'ç‰', 'æ˜', 'æ¸…', 'éŒ¦', 'è‰¯', 'å¦™', 'ç¥'];
            const negKeywords = ['æƒ¡', 'å£', 'è²ª', 'æ‰', 'ç½ª', 'äº‚', 'å‡', 'è™›', 'å½', 'å®³', 'æ', 'æ•—', 'äº¡', 'æ®º', 'æ­»', 'æš´', 'è™', 'å‡¶', 'æ®˜', 'å¥¸', 'é‚ª', 'çŸ­', 'æ·º', 'éŒ¯', 'è¬¬', 'ç‹¼', 'ç‹½', 'é¼ ', 'è›‡', 'é¬¼'];
            const map = {
                'è²ªè´“æ‰æ³•': 'è²¶ç¾©è©', 'ç„¡æ³•ç„¡å¤©': 'è²¶ç¾©è©', 'çŸ¥æ³•çŠ¯æ³•': 'è²¶ç¾©è©', 'é€é™æ³•å¤–': 'è²¶ç¾©è©', 'ä»¥èº«è©¦æ³•': 'è²¶ç¾©è©', 'ä½œæ³•è‡ªæ–ƒ': 'è²¶ç¾©è©', 
                'åŒæµåˆæ±™': 'è²¶ç¾©è©', 'å‰›æ„è‡ªç”¨': 'è²¶ç¾©è©', 'å£èœœè…¹åŠ': 'è²¶ç¾©è©', 'æŒ‡é¹¿ç‚ºé¦¬': 'è²¶ç¾©è©', 'æ®ºé›å–åµ': 'è²¶ç¾©è©', 'äº•åº•ä¹‹è›™': 'è²¶ç¾©è©',
                'å¥‰å…¬å®ˆæ³•': 'è¤’ç¾©è©', 'éµé¢ç„¡ç§': 'è¤’ç¾©è©', 'æ˜å¯Ÿç§‹æ¯«': 'è¤’ç¾©è©', 'å¤§ç¾©æ»…è¦ª': 'è¤’ç¾©è©', 'ç–¾é¢¨å‹è‰': 'è¤’ç¾©è©', 'ä¸€è«¾åƒé‡‘': 'è¤’ç¾©è©',
                'ä¸å±ˆä¸æ’“': 'è¤’ç¾©è©', 'ç²¾ç›Šæ±‚ç²¾': 'è¤’ç¾©è©', 'é èº¬ç›¡ç˜': 'è¤’ç¾©è©', 'è¦‹ç¾©å‹‡ç‚º': 'è¤’ç¾©è©', 'ç¹©ä¹‹ä»¥æ³•': 'è¤’ç¾©è©',
            };
            if (map[term]) return map[term];
            let score = 0;
            const text = term.replace(/ä¸/g, ''); 
            posKeywords.forEach(k => { if(text.includes(k)) score++; });
            negKeywords.forEach(k => { if(text.includes(k)) score--; });
            return score > 0 ? 'è¤’ç¾©è©' : (score < 0 ? 'è²¶ç¾©è©' : 'ä¸­æ€§è©');
        };

        const FULL_DATA_SOURCE = `## èˆ‡ã€Œæ³•å¾‹ã€æ”¿æ²»ã€è»äº‹ã€ç›¸é—œ
1. **ç´„æ³•ä¸‰ç« **ï¼š[é‡‹ç¾©] äº‹å‰ç´„å®šå¥½è¦å‰‡ã€‚ [ä¾‹å¥] è€å¸«é–‹å­¸ç¬¬ä¸€å¤©å°±å’Œå¤§å®¶ç´„æ³•ä¸‰ç« ï¼Œé²åˆ°ä¸‰æ¬¡å°±è¦é€²è¡Œæ„›æ ¡æœå‹™ã€‚
2. **è²ªè´“æ‰æ³•**ï¼š[é‡‹ç¾©] è²ªæ±™å—è³„ï¼Œé•æ³•äº‚ç´€ã€‚ [ä¾‹å¥] é‚£ä½å®˜å“¡å› è²ªè´“æ‰æ³•è¢«æª¢èˆ‰ï¼Œæœ€çµ‚é­åˆ°é©è·æŸ¥è¾¦ã€‚
3. **ç¹©ä¹‹ä»¥æ³•**ï¼š[é‡‹ç¾©] ä»¥æ³•å¾‹åˆ¶è£ç½ªçŠ¯ã€‚ [ä¾‹å¥] è­¦æ–¹èª“è¨€è¦å°‡é€™èµ·æ¶åŠ«æ¡ˆçš„å«ŒçŠ¯é€®æ•æ­¸æ¡ˆï¼Œç¹©ä¹‹ä»¥æ³•ã€‚
4. **ç„¡æ³•ç„¡å¤©**ï¼š[é‡‹ç¾©] å½¢å®¹äººæ¥µç‚ºæ”¾è‚†ï¼Œæ²’æœ‰æ³•ç´€ã€‚ [ä¾‹å¥] é€™ç¾¤é£†è»Šæ—åœ¨å¤§è¡—ä¸Šæ©«è¡ç›´æ’ï¼Œç°¡ç›´æ˜¯ç„¡æ³•ç„¡å¤©ã€‚
5. **å¥‰å…¬å®ˆæ³•**ï¼š[é‡‹ç¾©] è¬¹å®ˆå…¬å‹™å“¡çš„æœ¬åˆ†ï¼Œéµå®ˆæ³•ä»¤ã€‚ [ä¾‹å¥] ä»–ä¸€ç”Ÿå¥‰å…¬å®ˆæ³•ï¼Œå¾æœªåšéä»»ä½•è™§å¿ƒäº‹ï¼Œæ·±å—é„°é‡Œæ•¬é‡ã€‚
6. **çŸ¥æ³•çŠ¯æ³•**ï¼š[é‡‹ç¾©] æ˜çŸ¥æ³•å¾‹è¦å®šï¼Œå»æ•…æ„é•åã€‚ [ä¾‹å¥] èº«ç‚ºåŸ·æ³•äººå“¡å»çŸ¥æ³•çŠ¯æ³•ï¼Œç½ªåŠ ä¸€ç­‰ï¼Œç†æ‡‰å—åˆ°åš´æ‡²ã€‚
7. **é€é™æ³•å¤–**ï¼š[é‡‹ç¾©] çŠ¯ç½ªè€…é€ƒé¿äº†æ³•å¾‹çš„åˆ¶è£ã€‚ [ä¾‹å¥] æˆ‘å€‘çµ•ä¸èƒ½è®“ä½œæƒ¡å¤šç«¯çš„ç½ªçŠ¯é€é™æ³•å¤–ï¼Œå±å®³ç¤¾æœƒå®‰å…¨ã€‚
8. **ä»¥èº«è©¦æ³•**ï¼š[é‡‹ç¾©] ä¸é¡§æ³•å¾‹è¦å®šï¼Œè¦ªèº«å»åšçŠ¯æ³•çš„äº‹ã€‚ [ä¾‹å¥] é…’å¾Œé§•è»Šæ¥µåº¦å±éšªï¼Œè«‹åƒè¬ä¸è¦ä»¥èº«è©¦æ³•ã€‚
9. **æ³•ç¶²æ¢æ¢ï¼Œç–è€Œä¸æ¼**ï¼š[é‡‹ç¾©] å¤©é“å…¬å¹³ï¼Œä½œæƒ¡è€…çµ‚ç©¶é€ƒä¸éåˆ¶è£ã€‚ [ä¾‹å¥] ä»–èº²è—å¤šå¹´é‚„æ˜¯è¢«è­¦æ–¹æŠ“ç²ï¼ŒçœŸæ˜¯æ³•ç¶²æ¢æ¢ï¼Œç–è€Œä¸æ¼ã€‚
10. **ä½œæ³•è‡ªæ–ƒ**ï¼š[é‡‹ç¾©] æ¯”å–»è‡ªä½œè‡ªå—ã€‚ [ä¾‹å¥] é‚£äº›è¨­è¨ˆé™·å®³åˆ¥äººçš„äººï¼Œå¾€å¾€æœ€å¾Œæœƒä½œæ³•è‡ªæ–ƒï¼Œå®³åˆ°è‡ªå·±ã€‚
11. **åš´åˆ‘å³»æ³•**ï¼š[é‡‹ç¾©] åš´å²çš„åˆ‘ç½°å’Œè‹›åˆ»çš„æ³•å¾‹ã€‚ [ä¾‹å¥] åœ¨äº‚ä¸–ä¹‹ä¸­ï¼Œçµ±æ²»è€…å¸¸èª¤ä»¥ç‚ºä½¿ç”¨åš´åˆ‘å³»æ³•å°±èƒ½ç¶­æŒç§©åºã€‚
12. **å°±åœ°æ­£æ³•**ï¼š[é‡‹ç¾©] åœ¨çŠ¯ç½ªç¾å ´ç«‹åˆ»åŸ·è¡Œæ­»åˆ‘ã€‚ [ä¾‹å¥] æˆ°æ™‚å°æ–¼å›å¾’ï¼ŒæŒ‡æ®å®˜æœ‰æ¬Šå°‡å…¶å°±åœ°æ­£æ³•ä»¥å„†æ•ˆå°¤ã€‚
13. **ç¾èº«èªªæ³•**ï¼š[é‡‹ç¾©] è¦ªèº«èˆ‰ä¾‹ï¼Œèªªæ˜é“ç†ã€‚ [ä¾‹å¥] æˆ’è¸æˆåŠŸçš„é™³å…ˆç”Ÿç¾èº«èªªæ³•ï¼Œåˆ†äº«ä»–æ“ºè„«è¸ç™®çš„å¿ƒè·¯æ­·ç¨‹ã€‚
14. **éµé¢ç„¡ç§**ï¼š[é‡‹ç¾©] å½¢å®¹å…¬æ­£åš´æ˜ï¼Œä¸è¬›ç§æƒ…ã€‚ [ä¾‹å¥] åŒ…é’å¤©éµé¢ç„¡ç§çš„å½¢è±¡æ·±æ¤äººå¿ƒï¼Œæ˜¯æ­£ç¾©çš„åŒ–èº«ã€‚
15. **æ˜å¯Ÿç§‹æ¯«**ï¼š[é‡‹ç¾©] å½¢å®¹èƒ½æ´å¯Ÿäº‹ç†ï¼ˆä¹ŸæŒ‡è¦–åŠ›æ•éŠ³ï¼‰ã€‚ [ä¾‹å¥] æ³•å®˜è¾¦æ¡ˆå¿…é ˆæ˜å¯Ÿç§‹æ¯«ï¼Œæ‰èƒ½é¿å…å†¤å‡éŒ¯æ¡ˆã€‚
16. **å‹¿æ‰å‹¿ç¸±**ï¼š[é‡‹ç¾©] ä¸å†¤æ‰å¥½äººï¼Œä¹Ÿä¸æ”¾éå£äººã€‚ [ä¾‹å¥] å¸æ³•å¯©åˆ¤æ‡‰ç§‰æŒå‹¿æ‰å‹¿ç¸±çš„ç²¾ç¥ï¼Œæ‰èƒ½å½°é¡¯ç¤¾æœƒæ­£ç¾©ã€‚
17. **å¤§ç¾©æ»…è¦ª**ï¼š[é‡‹ç¾©] ç‚ºäº†ç¶­è­·å…¬ç†æ­£ç¾©ï¼Œä¸å¾‡ç§æƒ…ï¼Œä½¿çŠ¯ç½ªçš„è¦ªäººå—æ³•å¾‹åˆ¶è£ã€‚ [ä¾‹å¥] çŸ³å¥¢é›–ç„¶æƒ³å¤§ç¾©æ»…è¦ªï¼Œä½†å…§å¿ƒä»å……æ»¿å°çˆ¶è¦ªçš„è™§æ¬ ã€‚
18. **ç§»å­ä½œå¿ **ï¼š[é‡‹ç¾©] æŠŠå­é †çˆ¶æ¯çš„å¿ƒï¼Œè½‰ç§»ç‚ºæ•ˆå¿ å›ä¸»ã€‚ [ä¾‹å¥] å¤ä»£å°‡å£«å¸¸é ˆç§»å­ä½œå¿ ï¼Œè¾­åˆ¥çˆ¶æ¯å¥”èµ´æ²™å ´ä¿è¡›åœ‹å®¶ã€‚
19. **å…ˆæ–¬å¾Œå¥**ï¼š[é‡‹ç¾©] æ¯”å–»å…ˆæ¡å–è¡Œå‹•ï¼Œç„¶å¾Œå†å›å ±ä¸Šç´šã€‚ [ä¾‹å¥] äº‹æƒ…ç·Šæ€¥ï¼Œæˆ‘åªå¥½å…ˆæ–¬å¾Œå¥ï¼Œè«‹ç¶“ç†åŸè«’æˆ‘çš„é­¯è½ã€‚
20. **å®µè¡£æ—°é£Ÿ**ï¼š[é‡‹ç¾©] å¤©æœªäº®å°±ç©¿è¡£ï¼Œå¤©é»‘æ‰åƒé£¯ã€‚å½¢å®¹å‹¤æ–¼æ”¿äº‹ã€‚ [ä¾‹å¥] ç‚ºäº†åœ‹å®¶çš„ç¹æ¦®ï¼Œç¸½çµ±çµ‚æ—¥å®µè¡£æ—°é£Ÿï¼Œæ¥µç‚ºè¾›å‹ã€‚
21. **ç–¾é¢¨å‹è‰**ï¼š[é‡‹ç¾©] æ¯”å–»åœ¨è‰±é›£ç’°å¢ƒä¸‹ï¼Œæ‰èƒ½é¡¯å‡ºæ„å¿—å …å¼·çš„äººã€‚ [ä¾‹å¥] åªæœ‰åœ¨å±é›£æ™‚åˆ»ï¼Œæ‰èƒ½çœ‹å‡ºèª°æ˜¯ç–¾é¢¨å‹è‰èˆ¬çš„å¿ è‡£ã€‚
22. **æ´ç‡­æ©Ÿå…ˆ**ï¼š[é‡‹ç¾©] é å…ˆçœ‹æ¸…äº‹æƒ…çš„ç™¼å±•å¾µå…†ã€‚ [ä¾‹å¥] å„ªç§€çš„ä¼æ¥­å®¶ç¸½èƒ½æ´ç‡­æ©Ÿå…ˆï¼Œåœ¨å¸‚å ´è®ŠåŒ–å‰æ¶å¾—å•†æ©Ÿã€‚
23. **é˜²æ‚£æœªç„¶**ï¼š[é‡‹ç¾©] åœ¨ç¦æ‚£é‚„æ²’ç™¼ç”Ÿä¹‹å‰å°±å…ˆé˜²å‚™ã€‚ [ä¾‹å¥] å®šæœŸæª¢æŸ¥é›»è·¯æ˜¯ç‚ºäº†é˜²æ‚£æœªç„¶ï¼Œé¿å…ç«ç½ç™¼ç”Ÿã€‚
24. **ç™¾å¼Šå¢ç”Ÿ**ï¼š[é‡‹ç¾©] å„ç¨®å¼Šå®³åŒæ™‚ç™¼ç”Ÿã€‚ [ä¾‹å¥] é€™é …èˆŠåˆ¶åº¦å¯¦è¡Œå¤šå¹´ï¼Œå¦‚ä»Šå·²æ˜¯ç™¾å¼Šå¢ç”Ÿï¼Œæ€¥éœ€æ”¹é©ã€‚
25. **å™¤è‹¥å¯’èŸ¬**ï¼š[é‡‹ç¾©] å½¢å®¹ä¸æ•¢ä½œè²ã€‚ [ä¾‹å¥] é¢å°è€é—†çš„æ€’ç«ï¼Œå“¡å·¥å€‘å€‹å€‹å™¤è‹¥å¯’èŸ¬ï¼Œä¸æ•¢å¤šèªªä¸€å¥è©±ã€‚
26. **ä»¤å‡ºå¦‚å±±**ï¼š[é‡‹ç¾©] å‘½ä»¤ä¸€å‡ºï¼Œå¦‚å±±å …å®šï¼Œä¸å¯å‹•æ–ã€‚ [ä¾‹å¥] è»ä¸­ç´€å¾‹åš´æ˜ï¼Œä»¤å‡ºå¦‚å±±ï¼Œé•æŠ—è€…å¿…å—è™•åˆ†ã€‚
27. **èª…æ®ºç„¡è¾œ**ï¼š[é‡‹ç¾©] æ®ºå®³æ²’æœ‰ç½ªçš„äººã€‚ [ä¾‹å¥] æš´å›æ¿«æ®ºå¿ è‰¯ã€èª…æ®ºç„¡è¾œï¼Œæœ€çµ‚å°è‡´æ°‘æ€¨æ²¸é¨°ã€‚

## å½¢å®¹ã€Œå€‹äººç‰¹è³ªã€æ…‹åº¦ã€äººéš›äº’å‹•ã€
28. **å£èª…ç­†ä¼**ï¼š[é‡‹ç¾©] ç”¨è¨€èªæ–‡å­—æ­ç™¼è­´è²¬ã€‚ [ä¾‹å¥] é€™ä½è²ªå®˜çš„æƒ¡è¡Œè¢«æ­éœ²å¾Œï¼Œå¼•ä¾†å„ç•Œåª’é«”çš„å£èª…ç­†ä¼ã€‚
29. **å”¯å”¯è«¾è«¾**ï¼š[é‡‹ç¾©] ä¸€å‘³é †å¾ã€‚ [ä¾‹å¥] ä»–åœ¨ä¸»ç®¡é¢å‰ç¸½æ˜¯å”¯å”¯è«¾è«¾ï¼Œä¸æ•¢è¡¨é”è‡ªå·±çš„çœŸå¯¦æƒ³æ³•ã€‚
30. **ç›´è¨€ä¸è«±**ï¼š[é‡‹ç¾©] ç›´æˆªäº†ç•¶åœ°èªªã€‚ [ä¾‹å¥] å°æ–¼å…¬å¸çš„ç¼ºå¤±ï¼Œä»–ç¸½æ˜¯ç›´è¨€ä¸è«±åœ°æå‡ºæ”¹é€²å»ºè­°ã€‚
31. **å¾å–„å¦‚æµ**ï¼š[é‡‹ç¾©] è½å¾å¥½çš„æ„è¦‹ååˆ†è¿…é€Ÿã€‚ [ä¾‹å¥] ä¸€å€‹å¥½çš„é ˜å°è€…æ‡‰è©²å¾å–„å¦‚æµï¼Œå»£ç´éƒ¨å±¬çš„å»ºè¨€ã€‚
32. **å‰›æ„è‡ªç”¨**ï¼š[é‡‹ç¾©] å›ºåŸ·å·±è¦‹ã€‚ [ä¾‹å¥] ä»–å› å‰›æ„è‡ªç”¨ï¼Œè½ä¸é€²åˆ¥äººçš„å‹¸å‘Šï¼Œæœ€çµ‚å°è‡´ç”Ÿæ„å¤±æ•—ã€‚
33. **å¸«å¿ƒè‡ªç”¨**ï¼š[é‡‹ç¾©] è‡ªä»¥ç‚ºæ˜¯ã€‚ [ä¾‹å¥] åšå­¸å•åˆ‡å¿Œå¸«å¿ƒè‡ªç”¨ï¼Œæ‡‰å¤šåƒè€ƒå‰äººçš„ç ”ç©¶æˆæœã€‚
34. **å¯Ÿç´é›…è¨€**ï¼š[é‡‹ç¾©] æ¡ç´æ­£ç›´çš„è¨€è«–ã€‚ [ä¾‹å¥] åœ‹å›è‹¥èƒ½å¯Ÿç´é›…è¨€ï¼Œåœ‹å®¶å¿…èƒ½é•·æ²»ä¹…å®‰ã€‚
35. **å·§è¨€ä»¤è‰²**ï¼š[é‡‹ç¾©] è©±å¥½è½ä½†å¿ƒæ‡·ä¸è»Œã€‚ [ä¾‹å¥] å­”å­èªªï¼šã€Œå·§è¨€ä»¤è‰²ï¼Œé®®çŸ£ä»ã€ï¼Œæé†’æˆ‘å€‘å°å¿ƒèŠ±è¨€å·§èªçš„äººã€‚
36. **å‰›æ­£ä¸é˜¿**ï¼š[é‡‹ç¾©] å‰›å¼·æ­£ç›´ã€‚ [ä¾‹å¥] å¼µé‡‹ä¹‹å‰›æ­£ä¸é˜¿çš„åŸ·æ³•æ…‹åº¦ï¼Œè´å¾—äº†å¾Œä¸–çš„å°Šæ•¬ã€‚
37. **å£èœœè…¹åŠ**ï¼š[é‡‹ç¾©] å˜´ç”œå¿ƒæ¯’ã€‚ [ä¾‹å¥] é€™ç¨®å£èœœè…¹åŠçš„å°äººï¼Œè¡¨é¢å’Œä½ ç¨±å…„é“å¼Ÿï¼ŒèƒŒå¾Œå»æ…ä½ ä¸€åˆ€ã€‚
38. **è«é€†ä¹‹äº¤**ï¼š[é‡‹ç¾©] å¿ƒæ„ç›¸æŠ•çš„å¥½å‹ã€‚ [ä¾‹å¥] ä»–å€‘å…©äººå¿—è¶£ç›¸æŠ•ï¼Œæ˜¯å¤šå¹´çš„è«é€†ä¹‹äº¤ã€‚
39. **é’æ¢…ç«¹é¦¬**ï¼š[é‡‹ç¾©] å¾å°ä¸€èµ·é•·å¤§çš„ç©ä¼´ã€‚ [ä¾‹å¥] ä»–å€‘æ˜¯é’æ¢…ç«¹é¦¬ï¼Œé•·å¤§å¾Œè‡ªç„¶è€Œç„¶åœ°çµç‚ºäº†å¤«å¦»ã€‚
40. **éŒ™éŠ–å¿…è¼ƒ**ï¼š[é‡‹ç¾©] æ–¤æ–¤è¨ˆè¼ƒå¾®å°çš„åˆ©ç›Šã€‚ [ä¾‹å¥] ä»–é€™å€‹äººæ¥µåº¦åå—‡ï¼Œé€£ä¸€å¡ŠéŒ¢éƒ½è¦éŒ™éŠ–å¿…è¼ƒã€‚
41. **å¤§ç›¸é€•åº­**ï¼š[é‡‹ç¾©] å½¼æ­¤ç›¸å·®å¾ˆé ã€‚ [ä¾‹å¥] é€™å…©ç¯‡æ–‡ç« çš„è§€é»å¤§ç›¸é€•åº­ï¼Œå¼•ç™¼äº†æ¿€çƒˆçš„è¨è«–ã€‚
42. **æ®Šé€”åŒæ­¸**ï¼š[é‡‹ç¾©] æ–¹æ³•ä¸åŒï¼Œçµæœç›¸åŒã€‚ [ä¾‹å¥] é›–ç„¶æˆ‘å€‘çš„å­¸ç¿’æ–¹æ³•ä¸åŒï¼Œä½†æ®Šé€”åŒæ­¸ï¼Œæœ€å¾Œéƒ½è€ƒä¸Šäº†ç†æƒ³å­¸æ ¡ã€‚
43. **ä¸€è«¾åƒé‡‘**ï¼š[é‡‹ç¾©] ä¿¡ç”¨æ¥µé«˜ã€‚ [ä¾‹å¥] ä»–æ˜¯å€‹ä¸€è«¾åƒé‡‘çš„äººï¼Œç­”æ‡‰ä½ çš„äº‹æƒ…çµ•å°æœƒè¾¦åˆ°ã€‚
44. **ä¸å±ˆä¸æ’“**ï¼š[é‡‹ç¾©] æ„å¿—å …æ¯…ã€‚ [ä¾‹å¥] æ†‘è‘—ä¸å±ˆä¸æ’“çš„ç²¾ç¥ï¼Œä»–çµ‚æ–¼å…‹æœæ®˜ç–¾ï¼Œæˆç‚ºçŸ¥åé‹å‹•å“¡ã€‚
45. **ä¹˜é¢¨ç ´æµª**ï¼š[é‡‹ç¾©] å¿—å‘é å¤§ã€‚ [ä¾‹å¥] ç•¢æ¥­ç”Ÿå€‘å°‡è¦ä¹˜é¢¨ç ´æµªï¼Œå‹‡æ•¢è¿½å°‹è‡ªå·±çš„å¤¢æƒ³ã€‚
46. **åŠŸæˆåå°±**ï¼š[é‡‹ç¾©] äº‹æ¥­èˆ‡åè²çš†æœ‰æˆå°±ã€‚ [ä¾‹å¥] è¨±å¤šäººé›¢é„‰èƒŒäº•æ‰“æ‹¼ï¼Œå°±æ˜¯å¸Œæœ›æœ‰ä¸€å¤©èƒ½åŠŸæˆåå°±ï¼Œè¡£éŒ¦é‚„é„‰ã€‚
47. **é£›é»ƒé¨°é”**ï¼š[é‡‹ç¾©] ä»•é€”æˆ–äº‹æ¥­é †åˆ©å‡é·ã€‚ [ä¾‹å¥] è‡ªå¾ä»–å‡ä»»ç¸½ç¶“ç†å¾Œï¼Œå¾æ­¤é£›é»ƒé¨°é”ï¼Œä»¤äººç¾¨æ…•ã€‚
48. **é¼ ç›®å¯¸å…‰**ï¼š[é‡‹ç¾©] ç›®å…‰çŸ­æ·ºã€‚ [ä¾‹å¥] åšç”Ÿæ„è¦æœ‰é è¦‹ï¼Œè‹¥æ˜¯é¼ ç›®å¯¸å…‰ï¼Œåªçœ‹çœ¼å‰åˆ©ç›Šï¼Œå¾ˆé›£åšå¤§ã€‚
49. **å‹¤èƒ½è£œæ‹™**ï¼š[é‡‹ç¾©] å‹¤å¥®å¯å½Œè£œå¤©è³‡ä¸è¶³ã€‚ [ä¾‹å¥] é›–ç„¶ä»–ä¸å¤ è°æ˜ï¼Œä½†æ·±ä¿¡å‹¤èƒ½è£œæ‹™ï¼Œæ¯å¤©æ¯”åˆ¥äººèŠ±æ›´å¤šæ™‚é–“ç·´ç¿’ã€‚
50. **æŒç›ˆä¿æ³°**ï¼š[é‡‹ç¾©] è™•å¯Œè²´è€Œä¸é©•ï¼Œä¿å®ˆå¹³å®‰ã€‚ [ä¾‹å¥] ä¼æ¥­åœ¨å…¨ç››æ™‚æœŸæ›´æ‡‰æ‡‚å¾—æŒç›ˆä¿æ³°ï¼Œè¬¹æ…ç¶“ç‡Ÿã€‚
51. **æ˜å“²ä¿èº«**ï¼š[é‡‹ç¾©] è¿´é¿ç¦æ‚£ï¼Œä¿å…¨è‡ªå·±ã€‚ [ä¾‹å¥] åœ¨æ··äº‚çš„å±€å‹¢ä¸­ï¼Œè¨±å¤šäººé¸æ“‡æ˜å“²ä¿èº«ï¼Œä¸é¡˜æ²å…¥ç´›çˆ­ã€‚
52. **å…‰é¢¨éœ½æœˆ**ï¼š[é‡‹ç¾©] å½¢å®¹äººèƒ¸æ‡·å¦è•©ã€‚ [ä¾‹å¥] ä»–å“æ ¼é«˜å°šï¼Œå¦‚å…‰é¢¨éœ½æœˆèˆ¬ä»¤äººæ™¯ä»°ã€‚
53. **éºä¸–ç¨ç«‹**ï¼š[é‡‹ç¾©] æ¸…é«˜è„«ä¿—ï¼Œä¸èˆ‡ä¸–ä¿—å¾€ä¾†ã€‚ [ä¾‹å¥] é€™ä½éš±å£«ä½åœ¨æ·±å±±ä¸­ï¼Œéè‘—éºä¸–ç¨ç«‹çš„ç”Ÿæ´»ã€‚
54. **æ“šç†åŠ›çˆ­**ï¼š[é‡‹ç¾©] ä¾æ“šé“ç†ï¼Œæ¥µåŠ›çˆ­å–ã€‚ [ä¾‹å¥] é¢å°ä¸åˆç†çš„æ”¶è²»ï¼Œæ¶ˆè²»è€…æœ‰æ¬Šåˆ©æ“šç†åŠ›çˆ­ã€‚
55. **å›ºåŸ·ä¸é€š**ï¼š[é‡‹ç¾©] é ‘å›ºå …æŒï¼Œä¸çŸ¥è®Šé€šã€‚ [ä¾‹å¥] ä»–çš„æƒ³æ³•å¤ªéè€èˆŠä¸”å›ºåŸ·ä¸é€šï¼Œå¾ˆé›£èˆ‡å¹´è¼•äººæºé€šã€‚
56. **ç•¶æ©Ÿç«‹æ–·**ï¼š[é‡‹ç¾©] æŠ“ä½é—œéµæ™‚æ©Ÿï¼Œç«‹åˆ»åšæ±ºå®šã€‚ [ä¾‹å¥] éšŠé•·ç•¶æ©Ÿç«‹æ–·ä¸‹é”æ’¤é€€å‘½ä»¤ï¼Œæ‰ä¿å…¨äº†éšŠå“¡çš„æ€§å‘½ã€‚
57. **ç¾©æ†¤å¡«è†º**ï¼š[é‡‹ç¾©] èƒ¸ä¸­å……æ»¿ç¾©æ†¤ã€‚ [ä¾‹å¥] çœ‹åˆ°å¼±å°è¢«æ¬ºè² ï¼Œä»–æ„Ÿåˆ°ç¾©æ†¤å¡«è†ºï¼ŒæŒºèº«è€Œå‡ºã€‚
58. **è¼•ç‡é­¯è½**ï¼š[é‡‹ç¾©] è¨€è¡Œéš¨ä¾¿ã€ç²—é­¯è¡å‹•ã€‚ [ä¾‹å¥] ä½ é€™æ¨£è¼•ç‡é­¯è½åœ°åšæ±ºå®šï¼Œå¾Œæœå¯èƒ½æœƒä¸å ªè¨­æƒ³ã€‚
59. **å¯¦äº‹æ±‚æ˜¯**ï¼š[é‡‹ç¾©] è¬›æ±‚å¯¦éš›ï¼Œä¾æ“šäº‹å¯¦ã€‚ [ä¾‹å¥] ç§‘å­¸ç ”ç©¶å¿…é ˆç§‰æŒå¯¦äº‹æ±‚æ˜¯çš„ç²¾ç¥ï¼Œä¸èƒ½é€ å‡æ•¸æ“šã€‚
60. **å…±äº«å¤©å€«**ï¼š[é‡‹ç¾©] äº«å—å®¶åº­è¦ªæƒ…çš„æ¨‚è¶£ã€‚ [ä¾‹å¥] ä¸­ç§‹ç¯€æ˜¯å…¨å®¶åœ˜åœ“ã€å…±äº«å¤©å€«çš„ç¾å¥½æ™‚å…‰ã€‚
61. **æ•é¢¨æ‰å½±**ï¼š[é‡‹ç¾©] æ¯”å–»èªªè©±æˆ–åšäº‹æ²’æœ‰äº‹å¯¦æ ¹æ“šã€‚ [ä¾‹å¥] é€™äº›å…«å¦æ–°èå¤šåŠæ˜¯æ•é¢¨æ‰å½±ï¼Œä¸è¶³æ¡ä¿¡ã€‚
62. **è²½ç¬‘å¤§æ–¹**ï¼š[é‡‹ç¾©] è¢«è¦‹è­˜å»£åšçš„äººè­ç¬‘ã€‚ [ä¾‹å¥] å¦‚æœæ²’æœ‰æº–å‚™å¥½å°±ä¸Šå°æ¼”è¬›ï¼Œææ€•æœƒè²½ç¬‘å¤§æ–¹ã€‚
63. **å‚¾åœ‹å‚¾åŸ**ï¼š[é‡‹ç¾©] å½¢å®¹å¥³å­å®¹è²Œæ¥µç‚ºç¾éº—ã€‚ [ä¾‹å¥] å‚³èªªä¸­æ¥Šè²´å¦ƒæœ‰å‚¾åœ‹å‚¾åŸä¹‹è²Œï¼Œæ·±å—å”ç„å®—å¯µæ„›ã€‚
64. **ç™¼æ†¤è‘—è¿°**ï¼š[é‡‹ç¾©] ç™¼å¥®åŠªåŠ›è‘—æ›¸ç«‹èªªã€‚ [ä¾‹å¥] å¸é¦¬é·å—åˆ‘å¾Œç™¼æ†¤è‘—è¿°ï¼Œçµ‚æ–¼å®Œæˆäº†å‰å¤§çš„ã€Šå²è¨˜ã€‹ã€‚
65. **å¿è¾±è² é‡**ï¼š[é‡‹ç¾©] å¿å—å±ˆè¾±æ€¨è¬—ï¼Œè€Œæ‰¿æ“”é‡ä»»ã€‚ [ä¾‹å¥] ç‚ºäº†é¡§å…¨å¤§å±€ï¼Œä»–æ±ºå®šå¿è¾±è² é‡ï¼Œä¸èˆ‡å°æ–¹è¨ˆè¼ƒã€‚
66. **æ—¢å¾€ä¸å’**ï¼š[é‡‹ç¾©] å°éå»çš„éŒ¯èª¤ä¸å†è¿½ç©¶è²¬é›£ã€‚ [ä¾‹å¥] æ—¢ç„¶ä½ å·²ç¶“çœŸå¿ƒæ‚”æ”¹ï¼Œæˆ‘å€‘å°±æ—¢å¾€ä¸å’ï¼Œé‡æ–°é–‹å§‹å§ã€‚
67. **å†æ¥å†å²**ï¼š[é‡‹ç¾©] ç¹¼çºŒåŠªåŠ›ï¼Œä¸å†é¬†æ‡ˆã€‚ [ä¾‹å¥] é€™æ¬¡è€ƒè©¦é›–ç„¶å¤±åˆ©ï¼Œä½†ä»–æ±ºå®šå†æ¥å†å²ï¼Œä¸‹æ¬¡ä¸€å®šè€ƒå¥½ã€‚
68. **ååˆ—å‰èŒ…**ï¼š[é‡‹ç¾©] æˆç¸¾å„ªç•°ï¼Œæ’åœ¨å‰é¢ã€‚ [ä¾‹å¥] ä»–è®€æ›¸éå¸¸ç”¨åŠŸï¼Œæˆç¸¾ç¸½æ˜¯ååˆ—å‰èŒ…ã€‚

## å½¢å®¹ã€Œäº‹ç‰©ç‹€æ…‹ã€æƒ…å¢ƒã€æ™¯è‰²ã€
69. **çµ¡ç¹¹ä¸çµ•**ï¼š[é‡‹ç¾©] äººè»Šé€£çºŒä¸æ–·ã€‚ [ä¾‹å¥] å‡æ—¥æ™‚ï¼Œå‰å¾€é¢¨æ™¯å€çš„éŠå®¢çµ¡ç¹¹ä¸çµ•ã€‚
70. **æ’²æœ”è¿·é›¢**ï¼š[é‡‹ç¾©] äº‹æƒ…éŒ¯ç¶œè¤‡é›œï¼Œé›£è¾¨çœŸç›¸ã€‚ [ä¾‹å¥] é€™èµ·æ¡ˆä»¶çš„æ¡ˆæƒ…æ’²æœ”è¿·é›¢ï¼Œè­¦æ–¹èŠ±äº†å¥½å¹¾å€‹æœˆæ‰é‡æ¸…ã€‚
71. **å¸ç©ºè¦‹æ…£**ï¼š[é‡‹ç¾©] ç¶“å¸¸çœ‹åˆ°ï¼Œä¸è¶³ç‚ºå¥‡ã€‚ [ä¾‹å¥] é€™ç¨®èª‡å¼µçš„å»£å‘Šæ‰‹æ³•ï¼Œåœ¨ç¾ä»£ç¤¾æœƒæ—©å·²æ˜¯å¸ç©ºè¦‹æ…£äº†ã€‚
72. **æ›‡èŠ±ä¸€ç¾**ï¼š[é‡‹ç¾©] ç¾å¥½äº‹ç‰©çŸ­æš«å‡ºç¾ã€‚ [ä¾‹å¥] é‚£ä½æ­Œæ‰‹çˆ†ç´…å¾Œä¾¿éŠ·è²åŒ¿è·¡ï¼Œå¦‚æ›‡èŠ±ä¸€ç¾èˆ¬çŸ­æš«ã€‚
73. **ç™½é›²è’¼ç‹—**ï¼š[é‡‹ç¾©] ä¸–äº‹è®Šå¹»ç„¡å¸¸ã€‚ [ä¾‹å¥] åˆ†åˆ¥å¤šå¹´å¾Œå†ç›¸è¦‹ï¼Œä¸ç¦ä»¤äººæ„Ÿå˜†ä¸–äº‹å¦‚ç™½é›²è’¼ç‹—ï¼Œè®ŠåŒ–è¬åƒã€‚
74. **ç©ºä¸­æ¨“é–£**ï¼š[é‡‹ç¾©] è„«é›¢å¯¦éš›çš„ç†è«–æˆ–è™›æ§‹äº‹ç‰©ã€‚ [ä¾‹å¥] æ²’æœ‰åŸ·è¡ŒåŠ›çš„è¨ˆç•«ï¼Œå°±åƒç©ºä¸­æ¨“é–£ä¸€æ¨£ï¼Œæ˜¯ä¸å¯èƒ½å¯¦ç¾çš„ã€‚
75. **æ®ºé›å–åµ**ï¼š[é‡‹ç¾©] è²ªåœ–çœ¼å‰å°åˆ©ï¼Œæå®³é•·é åˆ©ç›Šã€‚ [ä¾‹å¥] éåº¦é–‹ç™¼å±±æ—ç„¡ç•°æ–¼æ®ºé›å–åµï¼Œçµ‚å°‡ç ´å£ç”Ÿæ…‹å¹³è¡¡ã€‚
76. **æ˜æ—¥é»ƒèŠ±**ï¼š[é‡‹ç¾©] éæ™‚çš„äº‹ç‰©ã€‚ [ä¾‹å¥] é€™æ¬¾æ‰‹æ©Ÿå»å¹´é‚„å¾ˆæµè¡Œï¼Œä»Šå¹´å»å·²æˆæ˜æ—¥é»ƒèŠ±ï¼Œä¹äººå•æ´¥ã€‚
77. **é¡èŠ±æ°´æœˆ**ï¼š[é‡‹ç¾©] è™›å¹»ä¸å¯¦çš„æ™¯è±¡ã€‚ [ä¾‹å¥] å¯Œè²´æ¦®è¯æœ‰å¦‚é¡èŠ±æ°´æœˆï¼Œè½‰çœ¼å³é€ï¼Œä¸å¿…éæ–¼åŸ·è‘—ã€‚
78. **æ‰‹è¶³ç„¡æª**ï¼š[é‡‹ç¾©] é©šæ…Œè€Œä¸çŸ¥è©²æ€éº¼è¾¦ã€‚ [ä¾‹å¥] çªå¦‚å…¶ä¾†çš„åœ°éœ‡è®“å¤§å®¶æ‰‹è¶³ç„¡æªï¼Œé©šæä¸å·²ã€‚
79. **å›ºè‹¥é‡‘æ¹¯**ï¼š[é‡‹ç¾©] é˜²å®ˆåš´å¯†ã€‚ [ä¾‹å¥] é€™åº§åŸå ¡çš„é˜²ç¦¦å·¥äº‹å›ºè‹¥é‡‘æ¹¯ï¼Œæ•µäººå¾ˆé›£æ”»ç ´ã€‚
80. **åƒç˜¡ç™¾å­”**ï¼š[é‡‹ç¾©] ç ´å£åš´é‡ã€‚ [ä¾‹å¥] ç¶“æ­·æˆ°ç«æ‘§æ®˜å¾Œï¼Œé€™åº§åŸå¸‚å·²æ˜¯åƒç˜¡ç™¾å­”ï¼Œç™¾å»¢å¾…èˆ‰ã€‚
81. **å¦‚é‡‹é‡è² **ï¼š[é‡‹ç¾©] è²¬ä»»å·²ç›¡ï¼Œå¿ƒæƒ…è¼•é¬†ã€‚ [ä¾‹å¥] çµ‚æ–¼æŠŠæœŸæœ«å ±å‘Šäº¤å‡ºå»äº†ï¼Œæˆ‘æ„Ÿåˆ°å¦‚é‡‹é‡è² ï¼Œå¿ƒæƒ…çœŸå¥½ã€‚
82. **ç„¡å¾µä¸ä¿¡**ï¼š[é‡‹ç¾©] æ²’æœ‰è­‰æ“šå°±ä¸èƒ½ä»¤äººç›¸ä¿¡ã€‚ [ä¾‹å¥] è¾¦æ¡ˆè¬›æ±‚è­‰æ“šï¼Œç„¡å¾µä¸ä¿¡ï¼Œä¸èƒ½åªæ†‘æ¨æ¸¬å°±å®šç½ªã€‚
83. **é©šé´»ä¸€ç¥**ï¼š[é‡‹ç¾©] ç¾å¥½äº‹ç‰©çŸ­æš«å‡ºç¾ã€‚ [ä¾‹å¥] é›–ç„¶åªæ˜¯é©šé´»ä¸€ç¥ï¼Œä½†å¥¹ç¾éº—çš„èº«å½±å·²æ·±æ·±å°åœ¨æˆ‘è…¦æµ·è£¡ã€‚
84. **ç•¶é ­æ£’å–**ï¼š[é‡‹ç¾©] ä½¿äººç«‹å³è¦ºæ‚Ÿçš„è­¦ç¤ºã€‚ [ä¾‹å¥] è€å¸«çš„ä¸€ç•ªè©±å¦‚ç•¶é ­æ£’å–ï¼Œè®“æˆ‘å¾¹åº•é†’æ‚Ÿï¼Œä¸å†æµªè²»å…‰é™°ã€‚
85. **è¡Œå°‡å°±æœ¨**ï¼š[é‡‹ç¾©] å½¢å®¹å¹´ç´€å·²å¤§ï¼Œå£½å‘½å°‡ç›¡ã€‚ [ä¾‹å¥] çœ‹è‘—çª—å¤–æ¯è‘‰é£„è½ï¼Œé‚£ä½è¡Œå°‡å°±æœ¨çš„è€äººä¸ç¦æ„Ÿå˜†ç”Ÿå‘½çŸ­æš«ã€‚
86. **éçœ¼é›²ç…™**ï¼š[é‡‹ç¾©] äº‹ç‰©æ¶ˆé€æ¥µå¿«ã€‚ [ä¾‹å¥] åŠŸååˆ©ç¥¿ä¸éæ˜¯éçœ¼é›²ç…™ï¼Œå”¯æœ‰å¥åº·èˆ‡å¿«æ¨‚æ‰æ˜¯çœŸå¯¦çš„ã€‚
87. **æœªé›¨ç¶¢ç¹†**ï¼š[é‡‹ç¾©] äº‹å‰åšå¥½æº–å‚™ã€‚ [ä¾‹å¥] æˆ‘å€‘æ‡‰è©²æœªé›¨ç¶¢ç¹†ï¼Œå¤šå­˜ä¸€é»éŒ¢ä»¥å‚™ä¸æ™‚ä¹‹éœ€ã€‚
88. **ä¸‰äººæˆè™**ï¼š[é‡‹ç¾©] è¬ è¨€æƒ‘çœ¾ã€‚ [ä¾‹å¥] è¬ è¨€å¯æ€•ï¼Œä¸‰äººæˆè™ï¼ŒåŸæœ¬æ²’æœ‰çš„äº‹èªªçš„äººå¤šäº†ï¼Œå¤§å®¶ä¹Ÿå°±ä¿¡äº†ã€‚
89. **å¤±ä¹‹æ±éš…ï¼Œæ”¶ä¹‹æ¡‘æ¦†**ï¼š[é‡‹ç¾©] æ¯”å–»é›–ç„¶å…ˆåœ¨æŸæ–¹é¢æœ‰æå¤±ï¼Œä½†çµ‚åœ¨å¦ä¸€æ–¹é¢æœ‰æˆå°±ã€‚ [ä¾‹å¥] é›–ç„¶å¤±å»äº†é€™ä»½å·¥ä½œï¼Œä½†ä¹Ÿå› æ­¤æ‰¾åˆ°äº†å‰µæ¥­çš„æ©Ÿæœƒï¼ŒçœŸæ˜¯å¤±ä¹‹æ±éš…ï¼Œæ”¶ä¹‹æ¡‘æ¦†ã€‚
90. **éŒ¯ç¶œè¤‡é›œ**ï¼š[é‡‹ç¾©] å½¢å®¹æƒ…æ³è¤‡é›œï¼Œé ­ç·’ç¹å¤šã€‚ [ä¾‹å¥] é€™éƒ¨é›»å½±çš„åŠ‡æƒ…éŒ¯ç¶œè¤‡é›œï¼Œéœ€è¦å°ˆå¿ƒè§€çœ‹æ‰èƒ½ç†è§£ã€‚
91. **éŠ·è²åŒ¿è·¡**ï¼š[é‡‹ç¾©] éš±è—å½¢è·¡ï¼Œä¸å†å‡ºç¾ã€‚ [ä¾‹å¥] é‚£ä½é€šç·çŠ¯è‡ªå¾é€ƒåˆ°åœ‹å¤–å¾Œï¼Œå°±éŠ·è²åŒ¿è·¡ï¼ŒéŸ³è¨Šå…¨ç„¡ã€‚
92. **è¶è™›è€Œå…¥**ï¼š[é‡‹ç¾©] è¶åŠ›é‡è™›å¼±æ™‚ä¾µå…¥ã€‚ [ä¾‹å¥] è©é¨™é›†åœ˜å¸¸åˆ©ç”¨äººå¿ƒçš„å¼±é»ï¼Œè¶è™›è€Œå…¥é¨™å–è²¡ç‰©ã€‚
93. **çŸ¥é›£è€Œé€€**ï¼š[é‡‹ç¾©] é‡åˆ°å›°é›£å°±é€€ç¸®ï¼ˆæˆ–æŒ‡æ˜æ™ºåœ°é€€å‡ºï¼‰ã€‚ [ä¾‹å¥] é‡åˆ°ç„¡æ³•è§£æ±ºçš„é›£é¡Œæ™‚ï¼Œæœ‰æ™‚çŸ¥é›£è€Œé€€ä¹Ÿæ˜¯ä¸€ç¨®æ™ºæ…§ã€‚
94. **å‚¾å®¶è•©ç”¢**ï¼š[é‡‹ç¾©] èŠ±å…‰å…¨éƒ¨å®¶ç”¢ã€‚ [ä¾‹å¥] ç‚ºäº†å„Ÿé‚„è³­å‚µï¼Œä»–ä¸å¾—ä¸è®Šè³£æˆ¿ç”¢ï¼Œç”šè‡³å‚¾å®¶è•©ç”¢ã€‚
95. **èŠ±åœ˜éŒ¦ç°‡**ï¼š[é‡‹ç¾©] å½¢å®¹äº”å½©ç¹½ç´›ã€ç¹è¯è±”éº—çš„æ™¯è±¡ã€‚ [ä¾‹å¥] æ˜¥å¤©åˆ°äº†ï¼Œé™½æ˜å±±ä¸ŠèŠ±åœ˜éŒ¦ç°‡ï¼Œç¾ä¸å‹æ”¶ã€‚
96. **è‰æœ¨æ‰¶ç–**ï¼š[é‡‹ç¾©] å½¢å®¹è‰æœ¨ç”Ÿé•·èŒ‚ç››ã€‚ [ä¾‹å¥] é€™åº§å…¬åœ’è£¡è‰æœ¨æ‰¶ç–ï¼Œæ˜¯å¸‚æ°‘ä¼‘é–’é‹å‹•çš„å¥½å»è™•ã€‚
97. **ä¸€æˆä¸è®Š**ï¼š[é‡‹ç¾©] å½¢å®¹å¢¨å®ˆæˆè¦ï¼Œä¸çŸ¥è®Šé€šã€‚ [ä¾‹å¥] ç”Ÿæ´»å¦‚æœä¸æ±‚è®ŠåŒ–ï¼Œç¸½æ˜¯ä¸€æˆä¸è®Šï¼Œä¹…äº†ä¹Ÿæœƒä»¤äººå­å€¦ã€‚
98. **ç›¤æ ¹éŒ¯ç¯€**ï¼š[é‡‹ç¾©] å½¢å®¹äº‹æƒ…è¤‡é›œï¼Œä¸æ˜“è™•ç†ã€‚ [ä¾‹å¥] é€™ä»¶å¼Šæ¡ˆèƒŒå¾Œçš„åˆ©ç›Šé—œä¿‚ç›¤æ ¹éŒ¯ç¯€ï¼Œèª¿æŸ¥èµ·ä¾†éå¸¸å›°é›£ã€‚
99. **ç­ç­å¯è€ƒ**ï¼š[é‡‹ç¾©] äº‹æƒ…éå¸¸æ˜é¡¯ï¼Œæœ‰æ†‘æ“šå¯ä»¥æŸ¥è­‰ã€‚ [ä¾‹å¥] é€™äº›å²å¯¦ç­ç­å¯è€ƒï¼Œä¸å®¹ä»»ä½•äººéš¨æ„æ‰­æ›²ã€‚

## æºè‡ªã€Œæ­·å²æ•…äº‹ã€æˆ–ã€Œå¯“è¨€ã€
100. **è„«ç©è€Œå‡º**ï¼š[é‡‹ç¾©] æ¯”å–»é¡¯éœ²æ‰èƒ½ï¼Œè¶…è¶Šçœ¾äººã€‚ [ä¾‹å¥] ç¶“éå±¤å±¤é¸æ‹”ï¼Œä»–çµ‚æ–¼å¾çœ¾å¤šåƒè³½è€…ä¸­è„«ç©è€Œå‡ºï¼Œå¥ªå¾—å† è»ã€‚
101. **ä¸€é³´é©šäºº**ï¼š[é‡‹ç¾©] å¹³æ™‚æ²’æœ‰è¡¨ç¾ï¼Œä¸€æœ‰è¡¨ç¾å°±è®“äººé©šè¨ã€‚ [ä¾‹å¥] ä»–å¹³æ™‚é»˜é»˜ç„¡èï¼Œæ²’æƒ³åˆ°åœ¨é€™æ¬¡æ¯”è³½ä¸­ä¸€é³´é©šäººï¼Œåˆ·æ–°äº†ç´€éŒ„ã€‚
102. **è€é¦¬è­˜é€”**ï¼š[é‡‹ç¾©] æ¯”å–»é–±æ­·æ·±ã€ç¶“é©—è±å¯Œçš„äººã€‚ [ä¾‹å¥] è¿·è·¯æ™‚ï¼Œå¹¸å¥½æœ‰ä½è€é¦¬è­˜é€”çš„ç•¶åœ°äººå¸¶è·¯ï¼Œæˆ‘å€‘æ‰é †åˆ©ä¸‹å±±ã€‚
103. **é£›é³¥ç›¡ï¼Œè‰¯å¼“è—**ï¼š[é‡‹ç¾©] æ¯”å–»å¤©ä¸‹å¹³å®šå¾Œï¼ŒåŠŸè‡£è¢«å»¢æ£„æˆ–æ®ºå®³ã€‚ [ä¾‹å¥] æ­·å²ä¸Šè¨±å¤šåŠŸè‡£åœ¨åŠ©å›ç‹æ‰“ä¸‹æ±Ÿå±±å¾Œï¼Œéƒ½é›£é€ƒé£›é³¥ç›¡ï¼Œè‰¯å¼“è—çš„æ‚²æ…˜å‘½é‹ã€‚
104. **ç‹¡å…”æ­»ï¼Œèµ°ç‹—çƒ¹**ï¼š[é‡‹ç¾©] æ¯”å–»äº‹æˆä¹‹å¾Œï¼Œæœ‰åŠŸä¹‹äººè¢«æ®ºå®³ã€‚ [ä¾‹å¥] èŒƒè ¡æ·±çŸ¥ç‹¡å…”æ­»ï¼Œèµ°ç‹—çƒ¹çš„é“ç†ï¼Œæ‰€ä»¥åŠŸæˆèº«é€€ï¼Œéš±å±…æ±Ÿæ¹–ã€‚
105. **æŒ‡é¹¿ç‚ºé¦¬**ï¼š[é‡‹ç¾©] æ¯”å–»æ··æ·†æ˜¯éï¼Œé¡›å€’é»‘ç™½ã€‚ [ä¾‹å¥] é‚£ä½ä¸»ç®¡ç‚ºäº†æ¨å¸è²¬ä»»ï¼Œç«Ÿç„¶æŒ‡é¹¿ç‚ºé¦¬ï¼Œå°‡éŒ¯èª¤å…¨æ¨çµ¦éƒ¨å±¬ã€‚
106. **ç ´é‡œæ²‰èˆŸ**ï¼š[é‡‹ç¾©] æ¯”å–»ä¸‹å®šæ±ºå¿ƒï¼Œä¸é¡§ä¸€åˆ‡åœ°åšåˆ°åº•ã€‚ [ä¾‹å¥] ç‚ºäº†è€ƒä¸Šç†æƒ³å¤§å­¸ï¼Œä»–å±•ç¾ç ´é‡œæ²‰èˆŸçš„æ±ºå¿ƒï¼Œæ¯å¤©è‹¦è®€åˆ°æ·±å¤œã€‚
107. **åœ–çª®åŒ•è¦‹**ï¼š[é‡‹ç¾©] æ¯”å–»äº‹æƒ…ç™¼å±•åˆ°æœ€å¾Œï¼ŒçœŸç›¸æˆ–æœ¬æ„é¡¯éœ²å‡ºä¾†ã€‚ [ä¾‹å¥] è«‡åˆ¤åˆ°äº†æœ€å¾Œé—œé ­ï¼Œå°æ–¹çš„é‡å¿ƒçµ‚æ–¼åœ–çª®åŒ•è¦‹ï¼Œéœ²å‡ºäº†çœŸé¢ç›®ã€‚
108. **é¢¨è•­è•­å…®æ˜“æ°´å¯’**ï¼š[é‡‹ç¾©] å½¢å®¹å£¯å£«è¦–æ­»å¦‚æ­¸çš„æ‚²å£¯å¿ƒæƒ…ã€‚ [ä¾‹å¥] èŠè»»å‡ºç™¼åˆºç§¦ç‹æ™‚ï¼ŒåŸå”±å‡ºã€Œé¢¨è•­è•­å…®æ˜“æ°´å¯’ã€ï¼Œä»¤åœ¨å ´çœ¾äººå‹•å®¹ã€‚
109. **éŸ‹ç·¨ä¸‰çµ•**ï¼š[é‡‹ç¾©] å½¢å®¹è®€æ›¸å‹¤å¥®ã€‚ [ä¾‹å¥] å­”å­æ™šå¹´ç ”è®€ã€Šæ˜“ç¶“ã€‹é”åˆ°éŸ‹ç·¨ä¸‰çµ•çš„ç¨‹åº¦ï¼Œå…¶å¥½å­¸ç²¾ç¥ä»¤äººä½©æœã€‚
110. **ä¸‰ä»¤äº”ç”³**ï¼š[é‡‹ç¾©] å†ä¸‰å‘Šèª¡ã€‚ [ä¾‹å¥] å„˜ç®¡æ”¿åºœä¸‰ä»¤äº”ç”³ç¦æ­¢é…’é§•ï¼Œä»æœ‰äººå¿ƒå­˜åƒ¥å€–ã€‚
111. **å¥‡è²¨å¯å±…**ï¼š[é‡‹ç¾©] æ¯”å–»ä¾é æŸç¨®å°ˆé•·æˆ–å›¤ç©ç‰©è³‡ï¼Œä»¥ç²å–æš´åˆ©ã€‚ [ä¾‹å¥] å‘‚ä¸éŸ‹èªç‚ºç§¦åœ‹è³ªå­å¥‡è²¨å¯å±…ï¼Œä¾¿å…¨åŠ›è³‡åŠ©ä»–å›åœ‹çˆ­å¥ªç‹ä½ã€‚
112. **é©šå¼“ä¹‹é³¥**ï¼š[é‡‹ç¾©] æ¯”å–»æ›¾å—æ‰“æ“Šæˆ–é©šåš‡ï¼Œç¨å¾®æœ‰é»å‹•éœå°±å®³æ€•çš„äººã€‚ [ä¾‹å¥] ç¶“æ­·éé‚£å ´å¤§åœ°éœ‡å¾Œï¼Œä»–å°±åƒé©šå¼“ä¹‹é³¥ï¼Œç¨æœ‰æ–æ™ƒå°±åš‡å¾—å¥ªé–€è€Œå‡ºã€‚
113. **å®ˆæ ªå¾…å…”**ï¼š[é‡‹ç¾©] æ¯”å–»æ‹˜æ³¥å®ˆæˆï¼Œä¸çŸ¥è®Šé€šï¼›æˆ–å¦„æƒ³ä¸å‹è€Œç²ã€‚ [ä¾‹å¥] æˆåŠŸéœ€è¦åŠªåŠ›ï¼Œä¸èƒ½æ•´å¤©å®ˆæ ªå¾…å…”ï¼ŒæœŸå¾…æ©Ÿæœƒè‡ªå‹•ä¸Šé–€ã€‚

## ä¿—è«ºèˆ‡åå¥
114. **æ™ºè€…åƒæ…®ï¼Œå¿…æœ‰ä¸€å¤±**ï¼š[é‡‹ç¾©] è°æ˜çš„äººè€ƒæ…®å†å‘¨è©³ï¼Œä¹Ÿé›£å…æœƒæœ‰å¤±èª¤ã€‚ [ä¾‹å¥] ä¿—è©±èªªï¼šã€Œæ™ºè€…åƒæ…®ï¼Œå¿…æœ‰ä¸€å¤±ã€ï¼Œæˆ‘å€‘åšä»»ä½•æ±ºå®šéƒ½æ‡‰é ç•™è½‰åœœçš„ç©ºé–“ã€‚
115. **å¤±ä¹‹æ¯«é‡ï¼Œè¬¬ä»¥åƒé‡Œ**ï¼š[é‡‹ç¾©] é–‹å§‹æ™‚é›–ç„¶åªå·®ä¸€é»é»ï¼Œçµæœå»æœƒé€ æˆå¾ˆå¤§çš„éŒ¯èª¤ã€‚ [ä¾‹å¥] å¤ªç©ºå·¥ç¨‹çš„è¨ˆç®—å¿…é ˆæ¥µåº¦ç²¾ç¢ºï¼Œå¦å‰‡å¤±ä¹‹æ¯«é‡ï¼Œè¬¬ä»¥åƒé‡Œï¼Œå¾Œæœä¸å ªè¨­æƒ³ã€‚
116. **å¿ è¨€é€†è€³åˆ©æ–¼è¡Œ**ï¼š[é‡‹ç¾©] èª æ‡‡çš„å‹¸å‘Šè½èµ·ä¾†ä¸é †è€³ï¼Œä½†å°è¡Œç‚ºæœ‰å¹«åŠ©ã€‚ [ä¾‹å¥] é›–ç„¶æœ‹å‹çš„æ‰¹è©•å¾ˆåˆºè€³ï¼Œä½†å¿ è¨€é€†è€³åˆ©æ–¼è¡Œï¼Œä½ æ‡‰è©²è™›å¿ƒæ¥å—ã€‚
117. **ç„¡é¡è¦‹æ±Ÿæ±çˆ¶è€**ï¼š[é‡‹ç¾©] å½¢å®¹å¤±æ•—å¾Œç¾æ–¼è¦‹æ•…é„‰äººã€‚ [ä¾‹å¥] è€ƒå ´å¤±åˆ©è®“ä»–è¦ºå¾—æ„§å°çˆ¶æ¯ï¼Œç„¡é¡è¦‹æ±Ÿæ±çˆ¶è€ã€‚
118. **äººä¸ç‚ºå·±ï¼Œå¤©èª…åœ°æ»…**ï¼š[é‡‹ç¾©] å¼·èª¿äººæ€§çš„è‡ªç§ï¼ˆè² é¢ä¾‹å¥ï¼‰ã€‚ [ä¾‹å¥] é‚£å€‹å¥¸å•†ä¿¡å¥‰ã€Œäººä¸ç‚ºå·±ï¼Œå¤©èª…åœ°æ»…ã€çš„æ­ªç†ï¼Œç‚ºäº†è³ºéŒ¢ä¸æ“‡æ‰‹æ®µã€‚
119. **ä»–å±±ä¹‹çŸ³ï¼Œå¯ä»¥æ”»éŒ¯**ï¼š[é‡‹ç¾©] æ¯”å–»å€ŸåŠ©å¤–åŠ›ï¼ˆåˆ¥äººçš„æ„è¦‹æˆ–ç¶“é©—ï¼‰ä¾†æ”¹æ­£è‡ªå·±çš„ç¼ºå¤±ã€‚ [ä¾‹å¥] æˆ‘å€‘å¯ä»¥è—‰é‘‘åœ‹å¤–çš„æˆåŠŸç¶“é©—ï¼Œä½œç‚ºä»–å±±ä¹‹çŸ³ï¼Œå¯ä»¥æ”»éŒ¯ï¼Œæ”¹å–„æˆ‘å€‘çš„åˆ¶åº¦ã€‚
120. **æ˜æ§æ˜“èº²ï¼Œæš—ç®­é›£é˜²**ï¼š[é‡‹ç¾©] å…¬é–‹çš„æ”»æ“Šå®¹æ˜“èº²é¿ï¼Œæš—åœ°è£¡çš„ç®—è¨ˆé›£ä»¥é˜²å‚™ã€‚ [ä¾‹å¥] å•†å ´ç«¶çˆ­æ¿€çƒˆï¼Œæ˜æ§æ˜“èº²ï¼Œæš—ç®­é›£é˜²ï¼Œä½ å¯åƒè¬è¦å°å¿ƒå°æ‰‹çš„æ‰‹æ®µã€‚`;

        // -- Sub Components --

        const MenuView = ({ 
            userName, setUserName, showNameWarning, mistakeLog, favorites, categories, parsedData, 
            onStartLearn, onStartQuiz, onViewHistory, onViewMistakes,
            onLogin, isLocked, onQuickLogin, lastUser
        }) => (
            <div className="max-w-5xl mx-auto">
                <div className="flex justify-between items-end mb-8">
                    <div>
                        <h1 className="text-4xl font-extrabold text-gray-900 tracking-tight flex items-center gap-3">
                            <span className="text-5xl">ğŸ“</span> æˆèªå¤§å¸« <span className="text-sm bg-blue-600 text-white px-2 py-1 rounded">å°ˆæ¥­ç‰ˆ</span>
                        </h1>
                        <div className="mt-4 flex items-center space-x-2">
                            <span className="text-gray-600 font-bold">å­¸å“¡å§“åï¼š</span>
                            <div className="relative flex items-center gap-2">
                                <input 
                                    type="text" 
                                    value={userName}
                                    onChange={(e) => !isLocked && setUserName(e.target.value)}
                                    placeholder="è«‹è¼¸å…¥å§“å"
                                    disabled={isLocked}
                                    className={`border rounded px-3 py-1 outline-none transition-all w-40 ${isLocked ? 'bg-gray-100 text-gray-500 cursor-not-allowed' : (showNameWarning ? 'border-red-500 ring-2 ring-red-200' : 'border-gray-300 focus:ring-2 focus:ring-blue-500')}`}
                                />
                                {!isLocked ? (
                                    <button onClick={onLogin} className="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm flex items-center transition-colors shadow-sm">
                                        <Icon path={icons.login} className="w-4 h-4 mr-1" fill="currentColor"/> ç™»å…¥
                                    </button>
                                ) : (
                                    <span className="text-green-600 text-sm font-bold flex items-center"><Icon path={icons.check} className="w-4 h-4 mr-1"/> å·²ç™»å…¥</span>
                                )}
                                {!isLocked && lastUser && (
                                    <button onClick={onQuickLogin} className="bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded text-sm flex items-center transition-colors">
                                        <Icon path={icons.lightning} className="w-3 h-3 mr-1" fill="currentColor"/> å¿«é€Ÿç™»å…¥ ({lastUser})
                                    </button>
                                )}
                                {showNameWarning && <div className="absolute left-0 -bottom-6 text-xs text-red-600 font-bold animate-pulse">* è«‹å…ˆè¼¸å…¥å§“åä¸¦ç™»å…¥æ‰èƒ½é–‹å§‹æ¸¬é©—</div>}
                            </div>
                        </div>
                    </div>
                    <div className="flex gap-2">
                        <button onClick={onViewHistory} className="flex items-center px-4 py-2 bg-white text-gray-700 rounded-lg shadow hover:bg-gray-50"><Icon path={icons.history} className="w-4 h-4 mr-2"/> ä½œç­”ç´€éŒ„</button>
                        <button onClick={onViewMistakes} className="flex items-center px-4 py-2 bg-red-50 text-red-600 rounded-lg shadow hover:bg-red-100 border border-red-200"><Icon path={icons.alert} className="w-4 h-4 mr-2"/> éŒ¯é¡Œæœ¬ ({mistakeLog.length})</button>
                    </div>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
                    <div className="bg-gradient-to-br from-pink-50 to-red-50 p-6 rounded-xl shadow-sm border border-pink-100 flex flex-col justify-between">
                        <div className="flex items-center mb-4"><div className="bg-white p-3 rounded-full shadow text-red-500 mr-4"><Icon path={icons.heart} className="w-8 h-8" fill="currentColor"/></div><div><h3 className="text-xl font-bold text-gray-800">æˆ‘çš„æ”¶è—</h3><p className="text-gray-500 text-sm">{favorites.length} å‰‡æˆèª</p></div></div>
                        <div className="flex gap-2">
                            <button onClick={() => onStartLearn('æ”¶è—å¤¾')} className="flex-1 py-2 bg-white text-pink-600 rounded shadow-sm hover:bg-pink-50">è¤‡ç¿’</button>
                            <button onClick={() => onStartQuiz('æ”¶è—å¤¾')} className="flex-1 py-2 bg-pink-500 text-white rounded shadow-sm hover:bg-pink-600">æŒ‘æˆ°</button>
                        </div>
                    </div>
                    {categories.map((cat, idx) => (
                        <div key={cat} className="bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-all border border-gray-100 flex flex-col">
                            <div className="flex justify-between items-start mb-2"><h3 className="text-lg font-bold text-gray-800">{cat}</h3><span className="text-xs text-gray-400">#{idx + 1}</span></div>
                            <div className="text-sm text-gray-500 mb-6 bg-gray-50 w-fit px-3 py-1 rounded-full">{parsedData[cat].length} å‰‡æˆèª</div>
                            <div className="flex gap-2 mt-auto">
                                <button onClick={() => onStartLearn(cat)} className="flex-1 flex items-center justify-center py-2 bg-amber-50 text-amber-700 rounded hover:bg-amber-100"><Icon path={icons.book} className="w-4 h-4 mr-2"/> ç·´ç¿’</button>
                                <button onClick={() => onStartQuiz(cat)} className="flex-1 flex items-center justify-center py-2 bg-blue-50 text-blue-700 rounded hover:bg-blue-100"><Icon path={icons.play} className="w-4 h-4 mr-2"/> æ¸¬é©—</button>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        const LearnView = ({ 
            activeCategory, items, learnPage, setLearnPage, favorites, toggleFavorite, completedDays, onMenu, onGenerateAll, isGeneratingAll, aiData 
        }) => {
            const totalPages = Math.ceil(items.length / ITEMS_PER_PAGE);
            const currentItems = items.slice(learnPage * ITEMS_PER_PAGE, (learnPage + 1) * ITEMS_PER_PAGE);

            return (
                <div className="max-w-4xl mx-auto">
                    <div className="bg-white p-4 rounded-xl shadow-sm mb-6 flex flex-col md:flex-row justify-between items-center sticky top-0 z-20 border-b border-gray-100">
                        <div className="flex items-center gap-4 mb-4 md:mb-0 w-full md:w-auto">
                            <button onClick={onMenu} className="text-gray-500 hover:text-gray-800 flex items-center whitespace-nowrap"><Icon path={icons.menu} className="w-5 h-5 mr-1"/> é¸å–®</button>
                            <h2 className="text-xl font-bold flex items-center whitespace-nowrap">
                                {activeCategory === 'æ”¶è—å¤¾' && <Icon path={icons.heart} className="w-5 h-5 text-red-500 mr-2" fill="currentColor"/>}
                                {activeCategory}
                            </h2>
                        </div>
                        <div className="flex-1 flex justify-center md:justify-end px-4">
                            <button onClick={() => onGenerateAll(currentItems)} disabled={isGeneratingAll} className={`flex items-center px-6 py-2 rounded-full font-bold text-white shadow-lg transition-all transform hover:-translate-y-0.5 active:scale-95 ${isGeneratingAll ? 'bg-gray-400 cursor-wait' : 'bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 ring-2 ring-offset-2 ring-indigo-300'}`}>{isGeneratingAll ? <><div className="loader mr-2"></div> ç”Ÿæˆä¸­...</> : <><Icon path={icons.wand} className="w-5 h-5 mr-2" /> ä¸€éµç”Ÿæˆæœ¬é åœ–è§£</>}</button>
                        </div>
                        <div className="flex overflow-x-auto max-w-full pb-2 md:pb-0 gap-2 mt-4 md:mt-0">
                            {Array.from({ length: totalPages }).map((_, i) => {
                                const isCompleted = completedDays.includes(`${activeCategory}-${i}`);
                                return (<button key={i} onClick={() => setLearnPage(i)} className={`px-4 py-1.5 rounded text-sm font-medium whitespace-nowrap flex items-center gap-2 transition-all ${learnPage === i ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}>ç¬¬ {i + 1} å¤©{isCompleted && <span className="bg-green-400 text-white text-[10px] px-1 rounded-full">âœ“</span>}</button>);
                            })}
                        </div>
                    </div>
                    <div className="space-y-4">
                        {currentItems.map(item => (
                            <div key={item.id} className="bg-white rounded-xl p-6 shadow-sm border border-gray-100 relative group hover:shadow-md transition-all">
                                <button onClick={() => toggleFavorite(item.id)} className={`absolute top-4 right-4 z-10 transition-colors ${favorites.includes(item.id) ? 'text-red-500' : 'text-gray-300 hover:text-red-500'}`}><Icon path={icons.heart} className="w-6 h-6" fill={favorites.includes(item.id) ? "currentColor" : "none"} /></button>
                                <div className="flex flex-col md:flex-row gap-6">
                                    <div className="flex-1">
                                        <div className="flex items-baseline gap-3 mb-2"><h3 className="text-2xl font-bold text-gray-800">{item.term}</h3><span className={`text-xs px-2 py-0.5 rounded ${item.sentiment === 'è¤’ç¾©è©' ? 'bg-green-100 text-green-700' : item.sentiment === 'è²¶ç¾©è©' ? 'bg-red-100 text-red-700' : 'bg-gray-100 text-gray-600'}`}>{item.sentiment}</span></div>
                                        <div className="bg-blue-50 p-3 rounded-lg text-blue-900 mb-3 text-sm">{item.definition}</div>
                                        <div className="text-gray-600 leading-relaxed border-l-4 border-amber-200 pl-3">{item.sentence && item.sentence.split(item.term).map((part, i, arr) => (<React.Fragment key={i}>{part}{i < arr.length - 1 && <span className="text-red-600 font-bold mx-1">{item.term}</span>}</React.Fragment>))}</div>
                                    </div>
                                    {aiData[item.id] && !aiData[item.id].error && (<div className="w-full md:w-64 flex-shrink-0 flex flex-col items-center justify-center animate-fade-in-up">{aiData[item.id].loading ? (<div className="w-full h-40 bg-gray-50 rounded-lg border border-gray-200 flex flex-col items-center justify-center text-gray-400"><div className="loader mb-2"></div><span className="text-xs">AI ç¹ªåœ–ä¸­...</span></div>) : (<div className="bg-indigo-50 rounded-xl p-3 border border-indigo-100 w-full"><div className="mb-2 rounded-lg overflow-hidden border border-indigo-200 bg-white shadow-sm"><img src={aiData[item.id].image} alt="AI illustration" className="w-full h-40 object-cover hover:scale-105 transition-transform duration-500" /></div><div className="text-xs text-indigo-800 font-medium leading-relaxed bg-white/50 p-2 rounded"><span className="font-bold block mb-1 text-indigo-600">ğŸ’¡ AI æƒ…å¢ƒè§£èªª</span>{aiData[item.id].desc}</div></div>)}</div>)}
                                    {/* Error state */}
                                    {aiData[item.id] && aiData[item.id].error && (
                                        <div className="w-full md:w-64 flex-shrink-0 flex flex-col items-center justify-center animate-fade-in-up">
                                            <div className="w-full h-40 bg-red-50 rounded-lg border border-red-200 flex flex-col items-center justify-center text-red-400 p-2 text-center">
                                                <Icon path={icons.alert} className="w-6 h-6 mb-1"/>
                                                <span className="text-xs font-bold">åœ–ç‰‡ç”Ÿæˆå¤±æ•—</span>
                                                {aiData[item.id].errorMessage && (
                                                     <div className="text-[10px] mt-1 text-red-400 px-1 leading-tight max-h-16 overflow-y-auto">{aiData[item.id].errorMessage}</div>
                                                )}
                                                <button onClick={() => onGenerateAll([item])} className="mt-2 text-xs bg-white border border-red-200 px-2 py-1 rounded shadow-sm hover:bg-red-50">é‡è©¦</button>
                                            </div>
                                            {/* å¦‚æœæœ‰æˆåŠŸæŠ“åˆ°æè¿°æ–‡å­—ï¼Œå³ä½¿åœ–ç‰‡å¤±æ•—ä¹Ÿé¡¯ç¤º */}
                                            {aiData[item.id].desc && (
                                                <div className="w-full mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded border border-gray-200">
                                                    <span className="font-bold text-gray-500 block mb-1">æƒ…å¢ƒè§£èªª (æ–‡å­—ç‰ˆ):</span>
                                                    {aiData[item.id].desc}
                                                </div>
                                            )}
                                        </div>
                                    )}
                                </div>
                            </div>
                        ))}
                    </div>
                    <div className="h-10"></div>
                </div>
            );
        };

        const QuizView = ({ 
            questions, score, userName, combo, onAnswer, onFinish, onMenu, onViewHistory, favorites, toggleFavorite,
            // New props
            activeCategory, totalItems, quizPage, onPageChange, completedDays 
        }) => {
            const [showResult, setShowResult] = useState(false);
            const isFinished = questions.length > 0 && questions.every(q => q.userAnswer !== null);
            const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);

            useEffect(() => { if (isFinished && !showResult) { onFinish(); setShowResult(true); } }, [isFinished]);

            if (showResult) {
                return (
                    <div className="max-w-2xl mx-auto pt-10">
                        <div className="bg-white rounded-2xl shadow-xl overflow-hidden text-center">
                            <div className="bg-blue-600 p-8 text-white"><h2 className="text-3xl font-bold mb-2">æ¸¬é©—å®Œæˆï¼</h2><p className="opacity-90">è¾›è‹¦äº†ï¼Œ{userName}</p></div>
                            <div className="p-8"><div className="text-6xl font-black text-blue-600 mb-4">{score} <span className="text-2xl text-gray-400 font-medium">/ {questions.length}</span></div><div className="flex justify-center gap-4 mb-8"><div className="bg-green-50 text-green-700 px-4 py-2 rounded-lg font-bold">ç­”å° {score}</div><div className="bg-red-50 text-red-700 px-4 py-2 rounded-lg font-bold">ç­”éŒ¯ {questions.length - score}</div></div><div className="flex flex-col gap-3"><button onClick={onMenu} className="w-full py-3 bg-gray-100 hover:bg-gray-200 rounded-xl font-bold text-gray-700">å›åˆ°é¸å–®</button><button onClick={onViewHistory} className="w-full py-3 bg-blue-600 hover:bg-blue-700 rounded-xl font-bold text-white shadow-lg">æŸ¥çœ‹è©³ç´°ç´€éŒ„</button></div></div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="max-w-4xl mx-auto pb-20">
                    <div className="bg-white p-4 rounded-xl shadow-sm mb-6 sticky top-0 z-20 flex flex-col md:flex-row justify-between items-center border-b-4 border-blue-500">
                        <div className="flex items-center gap-4 mb-4 md:mb-0 w-full md:w-auto">
                            <button onClick={onMenu} className="text-gray-500 text-sm flex items-center hover:text-gray-800"><Icon path={icons.menu} className="w-4 h-4 mr-1"/> æ”¾æ£„</button>
                            <div className="font-bold text-lg flex items-center gap-4"><span>{userName}</span><span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">å¾—åˆ†: {score}</span></div>
                            {combo > 1 && <div className="text-orange-500 font-black animate-pop">ğŸ”¥ COMBO x{combo}</div>}
                        </div>
                        {activeCategory !== 'éŒ¯é¡Œæœ¬' && activeCategory !== 'æ”¶è—å¤¾' && (
                            <div className="flex overflow-x-auto max-w-full pb-2 md:pb-0 gap-2 mt-4 md:mt-0">
                                {Array.from({ length: totalPages }).map((_, i) => {
                                    const isCompleted = completedDays.includes(`${activeCategory}-${i}`);
                                    return (
                                        <button key={i} onClick={() => onPageChange(i)} 
                                            className={`px-4 py-1.5 rounded text-sm font-medium whitespace-nowrap flex items-center gap-2 transition-all
                                            ${quizPage === i ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}>
                                            ç¬¬ {i + 1} å¤©
                                            {isCompleted && <span className="bg-green-400 text-white text-[10px] px-1 rounded-full">âœ“</span>}
                                        </button>
                                    );
                                })}
                            </div>
                        )}
                    </div>
                    <div className="space-y-8">
                        {questions.map((q, idx) => (
                            <div key={idx} className={`bg-white rounded-xl shadow-sm border-2 overflow-hidden transition-all duration-500 relative ${q.userAnswer === null ? 'border-transparent' : (q.isCorrect ? 'border-green-200 bg-green-50/30' : 'border-red-200 bg-red-50/30')}`}>
                                <button onClick={() => toggleFavorite(q.id)} className={`absolute top-4 right-4 z-10 transition-colors ${favorites.includes(q.id) ? 'text-red-500' : 'text-gray-300 hover:text-red-500'}`}><Icon path={icons.heart} className="w-6 h-6" fill={favorites.includes(q.id) ? "currentColor" : "none"} /></button>
                                <div className="p-6 border-b border-gray-50">
                                    <div className="flex justify-between items-center mb-4">
                                        <span className="font-black text-[#FF0000] tracking-wider">QUESTION {idx + 1}</span>
                                        {q.userAnswer !== null && (q.isCorrect ? <span className="text-green-600 font-bold flex items-center"><Icon path={icons.check} className="w-5 h-5 mr-1"/> æ­£ç¢º</span> : <span className="text-red-600 font-bold flex items-center"><Icon path={icons.alert} className="w-5 h-5 mr-1"/> éŒ¯èª¤</span>)}
                                    </div>
                                    <div className="text-xl font-medium text-gray-800 leading-loose">{q.sentence && q.sentence.split(q.term).map((part, i, arr) => (<span key={i}>{part}{i < arr.length - 1 && <span className="inline-block w-24 border-b-4 border-gray-300 mx-1 align-bottom"></span>}</span>))}ã€‚</div>
                                </div>
                                <div className="p-4 bg-gray-50/50">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                        {q.options.map(opt => {
                                            let btnClass = "p-4 rounded-xl border text-left font-bold text-lg transition-all relative overflow-hidden "; // åŠ å¤§é¸é …å­—é«”
                                            if (q.userAnswer === null) btnClass += "bg-white border-gray-200 hover:border-blue-400 hover:shadow-md cursor-pointer active:scale-[0.99]";
                                            else { if (opt.id === q.id) btnClass += "bg-green-100 border-green-500 text-green-800 ring-2 ring-green-200"; else if (opt.id === q.userAnswer) btnClass += "bg-red-100 border-red-500 text-red-800"; else btnClass += "bg-gray-100 border-gray-200 text-gray-400 opacity-50"; }
                                            return <button key={opt.id} onClick={() => onAnswer(idx, opt.id)} disabled={q.userAnswer !== null} className={btnClass}>{opt.term}{q.userAnswer !== null && opt.id === q.id && <div className="absolute right-3 top-1/2 -translate-y-1/2 text-green-600"><Icon path={icons.check} className="w-6 h-6"/></div>}</button>
                                        })}
                                    </div>
                                </div>
                                {q.userAnswer !== null && !q.isCorrect && (
                                    <div className="p-6 bg-red-50 border-t border-red-100 animate-fade-in-up">
                                        <div className="flex gap-2 text-base text-red-800 mb-2 font-bold"><Icon path={icons.book} className="w-5 h-5"/> æ­£è§£è§£æï¼š</div>
                                        <div className="text-gray-800 text-xl leading-relaxed"><span className="font-bold text-2xl mr-2 text-red-900">{q.term}</span> {q.definition}</div>
                                    </div>
                                )}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const HistoryView = ({ historyLog, setHistoryLog, onMenu }) => {
            const [selectedLog, setSelectedLog] = useState(null);
            const renderQuestionSentence = (sentence, term) => { if (!sentence) return <span className="text-gray-400 italic">ï¼ˆä¾‹å¥è³‡æ–™ç¼ºå¤±ï¼‰</span>; return sentence.split(term).map((part, i, arr) => (<span key={i}>{part}{i < arr.length - 1 && <span className="inline-block min-w-[3rem] border-b-2 border-gray-400 mx-1 align-bottom text-transparent select-none">____</span>}</span>)); };
            const renderFullSentence = (sentence, term) => { if (!sentence) return ""; return sentence.split(term).map((part, i, arr) => (<span key={i}>{part}{i < arr.length - 1 && <span className="text-blue-600 font-bold mx-1">{term}</span>}</span>)); };

            if (selectedLog) {
                return (
                    <div className="w-full max-w-6xl mx-auto bg-white min-h-screen p-8 shadow-2xl">
                        <div className="flex justify-between items-center mb-8 pb-4 border-b border-gray-200">
                            <button onClick={() => setSelectedLog(null)} className="flex items-center text-blue-600 hover:text-blue-800 font-bold text-lg"><Icon path={icons.left} className="w-6 h-6 mr-2"/> è¿”å›åˆ—è¡¨</button>
                            <div className="text-right"><h2 className="text-3xl font-extrabold text-gray-800">{selectedLog.category} <span className="text-xl font-medium text-gray-500">æ¸¬é©—å›æ”¾</span></h2><p className="text-gray-500 mt-1">{selectedLog.date} â€¢ å¾—åˆ† <span className="text-blue-600 font-bold text-xl">{selectedLog.score}</span> / {selectedLog.total}</p></div>
                        </div>
                        <div className="space-y-8">
                            {selectedLog.details.map((d, i) => (
                                <div key={i} className={`p-6 rounded-2xl border-l-8 shadow-sm ${d.isCorrect ? 'border-green-400 bg-green-50/30' : 'border-red-400 bg-red-50/30'}`}>
                                    <div className="mb-4">
                                        <div className="flex items-center gap-2 mb-2"><span className="bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded">é¡Œç›® {i+1}</span>{!d.isCorrect && <span className="bg-red-100 text-red-600 text-xs font-bold px-2 py-1 rounded">ç­”éŒ¯</span>}</div>
                                        <div className="text-xl font-medium text-gray-800 leading-relaxed pl-1">{renderQuestionSentence(d.sentence, d.term)}ã€‚</div>
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4 pt-4 border-t border-gray-200/60">
                                        <div><h4 className="text-gray-500 text-sm font-bold mb-2 uppercase tracking-wide">æ‚¨çš„ä½œç­”</h4><div className="flex items-center"><div className={`text-lg font-bold ${d.isCorrect ? 'text-green-600' : 'text-red-600 line-through decoration-2'}`}>{d.userAnswer}</div>{d.isCorrect && <Icon path={icons.check} className="w-6 h-6 text-green-500 ml-2" />}</div>{!d.isCorrect && <div className="mt-2 text-green-700 font-bold bg-green-100 px-3 py-1 rounded inline-block">æ­£ç¢ºç­”æ¡ˆï¼š{d.correctAnswer}</div>}</div>
                                        <div className="bg-white/60 p-4 rounded-xl border border-gray-100"><h4 className="text-gray-500 text-sm font-bold mb-2 uppercase tracking-wide flex items-center"><Icon path={icons.book} className="w-4 h-4 mr-1"/> è§£æ</h4><p className="text-gray-700 font-medium text-lg mb-2">{d.term}ï¼š{d.definition}</p><p className="text-gray-500 text-base leading-relaxed border-l-2 border-blue-200 pl-3 italic">{renderFullSentence(d.sentence, d.term)}</p></div>
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div className="h-20"></div>
                    </div>
                )
            }
            return (
                <div className="max-w-4xl mx-auto">
                    <div className="flex items-center mb-6"><button onClick={onMenu} className="mr-4 p-2 bg-white rounded-full shadow hover:bg-gray-100"><Icon path={icons.left} className="w-5 h-5"/></button><h2 className="text-2xl font-bold text-gray-800">ğŸ“œ ä½œç­”ç´€éŒ„</h2></div>
                    {historyLog.length === 0 ? <div className="text-center py-20 text-gray-400">å°šç„¡ç´€éŒ„</div> : (
                        <div className="bg-white rounded-xl shadow-sm overflow-hidden"><table className="w-full text-left"><thead className="bg-gray-50 border-b border-gray-200"><tr><th className="p-4 font-bold text-gray-600">æ—¥æœŸ</th><th className="p-4 font-bold text-gray-600">å§“å</th><th className="p-4 font-bold text-gray-600">åˆ†é¡</th><th className="p-4 font-bold text-gray-600">åˆ†æ•¸</th><th className="p-4 font-bold text-gray-600">æ“ä½œ</th></tr></thead><tbody className="divide-y divide-gray-100">{historyLog.map(log => (<tr key={log.id} className="hover:bg-blue-50 transition-colors"><td className="p-4 text-gray-500 text-sm">{log.date}</td><td className="p-4 font-medium">{log.userName}</td><td className="p-4 text-gray-600">{log.category}</td><td className="p-4"><span className={`font-bold px-2 py-1 rounded ${log.score === log.total ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'}`}>{log.score}/{log.total}</span></td><td className="p-4"><button onClick={() => setSelectedLog(log)} className="text-blue-600 hover:text-blue-800 text-sm font-bold">å›æ”¾</button></td></tr>))}</tbody></table></div>
                    )}
                    <div className="text-center mt-8"><button onClick={() => {if(confirm('ç¢ºå®šæ¸…é™¤æ‰€æœ‰ç´€éŒ„ï¼Ÿ')) setHistoryLog([])}} className="text-red-400 hover:text-red-600 text-sm flex items-center justify-center mx-auto"><Icon path={icons.trash} className="w-4 h-4 mr-1"/> æ¸…é™¤æ‰€æœ‰ç´€éŒ„</button></div>
                </div>
            );
        };

        const MistakeView = ({ mistakes, mistakeLog, setMistakeLog, onMenu, onReviewAll }) => {
            return (
                <div className="max-w-4xl mx-auto">
                    <div className="flex items-center justify-between mb-6">
                        <div className="flex items-center"><button onClick={onMenu} className="mr-4 p-2 bg-white rounded-full shadow hover:bg-gray-100"><Icon path={icons.left} className="w-5 h-5"/></button><h2 className="text-2xl font-bold text-gray-800 flex items-center"><Icon path={icons.alert} className="w-6 h-6 text-red-500 mr-2"/> éŒ¯é¡Œæœ¬</h2></div>
                        {mistakes.length > 0 && <button onClick={onReviewAll} className="px-6 py-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 font-bold animate-pulse">ç«‹å³è¤‡ç¿’å…¨éƒ¨éŒ¯é¡Œ ({mistakes.length})</button>}
                    </div>
                    {mistakes.length === 0 ? <div className="text-center py-20 bg-white rounded-xl shadow-sm"><div className="text-6xl mb-4">ğŸ‰</div><p className="text-xl text-gray-600 font-bold">å¤ªæ£’äº†ï¼ç›®å‰æ²’æœ‰éŒ¯é¡Œ</p><p className="text-gray-400 mt-2">ç¹¼çºŒä¿æŒï¼Œå»æŒ‘æˆ°æ›´å¤šæˆèªå§ï¼</p></div> : (
                        <div className="grid gap-4">{mistakes.map(item => { const log = mistakeLog.find(m => m.id === item.id); return (<div key={item.id} className="bg-white p-5 rounded-xl shadow-sm border-l-4 border-red-400 flex justify-between items-center"><div><h3 className="text-xl font-bold text-gray-800 mb-1">{item.term} <span className="text-xs text-red-500 bg-red-50 px-2 rounded">éŒ¯èª¤ {log.count} æ¬¡</span></h3><p className="text-gray-500 text-sm">{item.definition}</p></div><div className="text-xs text-gray-400 text-right">æœ€å¾ŒéŒ¯èª¤:<br/>{new Date(log.lastMissed).toLocaleDateString()}</div></div>); })}</div>
                    )}
                    {mistakes.length > 0 && <div className="text-center mt-8"><button onClick={() => {if(confirm('ç¢ºå®šæ¸…ç©ºéŒ¯é¡Œæœ¬ï¼Ÿ')) { setMistakeLog([]); localStorage.setItem('idiomMistakes', '[]'); } }} className="text-gray-400 hover:text-gray-600 text-sm">æ¸…ç©ºéŒ¯é¡Œæœ¬</button></div>}
                </div>
            );
        };

        const App = () => {
            const [parsedData, setParsedData] = useState({});
            const [categories, setCategories] = useState([]);
            const [currentMode, setCurrentMode] = useState('menu'); 
            const [activeCategory, setActiveCategory] = useState(null);
            const [showNameWarning, setShowNameWarning] = useState(false);
            
            const [userName, setUserName] = useState('');
            const [isLocked, setIsLocked] = useState(false);
            const [lastUser, setLastUser] = useState(() => localStorage.getItem('idiomLastUser'));

            const [favorites, setFavorites] = useState(() => JSON.parse(localStorage.getItem('idiomFavorites')) || []);
            const [historyLog, setHistoryLog] = useState(() => JSON.parse(localStorage.getItem('idiomHistory')) || []);
            const [mistakeLog, setMistakeLog] = useState(() => JSON.parse(localStorage.getItem('idiomMistakes')) || []);
            const [completedDays, setCompletedDays] = useState(() => JSON.parse(localStorage.getItem('idiomCompletedDays')) || []);
            const [learnPage, setLearnPage] = useState(0);

            // AI State
            const [aiData, setAiData] = useState({});
            const [isGeneratingAll, setIsGeneratingAll] = useState(false);

            const [quizQuestions, setQuizQuestions] = useState([]);
            const [quizScore, setQuizScore] = useState(0);
            const [combo, setCombo] = useState(0);
            const [quizPage, setQuizPage] = useState(0);

            useEffect(() => { localStorage.setItem('idiomFavorites', JSON.stringify(favorites)); }, [favorites]);
            useEffect(() => { localStorage.setItem('idiomHistory', JSON.stringify(historyLog)); }, [historyLog]);
            useEffect(() => { localStorage.setItem('idiomMistakes', JSON.stringify(mistakeLog)); }, [mistakeLog]);
            useEffect(() => { localStorage.setItem('idiomCompletedDays', JSON.stringify(completedDays)); }, [completedDays]);
            
            // Login Handlers
            const handleLogin = () => {
                if (userName.trim()) {
                    setIsLocked(true);
                    setShowNameWarning(false);
                    localStorage.setItem('idiomLastUser', userName);
                    setLastUser(userName);
                }
            };

            const handleQuickLogin = () => {
                const storedUser = localStorage.getItem('idiomLastUser');
                if (storedUser) {
                    setUserName(storedUser);
                    setIsLocked(true);
                    setShowNameWarning(false);
                }
            };

            const toggleFavorite = (id) => { setFavorites(prev => prev.includes(id) ? prev.filter(fid => fid !== id) : [...prev, id]); };
            const allItems = useMemo(() => Object.values(parsedData).flat(), [parsedData]);

            const parseData = (text) => {
                if (!text?.trim()) return;
                const lines = text.split('\n');
                const data = {};
                let currentCat = '';
                let count = 0;
                lines.forEach(line => {
                    const catMatch = line.match(/^##\s*(.+)/);
                    if (catMatch) { currentCat = catMatch[1].trim(); data[currentCat] = []; return; }
                    const idiomMatch = line.match(/^\d+\.\s*\*\*(.+?)\*\*ï¼š\s*(.+)/);
                    if (idiomMatch && currentCat) {
                        const term = idiomMatch[1];
                        const rest = idiomMatch[2];
                        let definition = "å°šç„¡é‡‹ç¾©", sentence = rest;
                        const defIdx = rest.indexOf("[é‡‹ç¾©]");
                        const exIdx = rest.indexOf("[ä¾‹å¥]");
                        if (defIdx !== -1 && exIdx !== -1) { definition = rest.substring(defIdx + 4, exIdx).trim(); sentence = rest.substring(exIdx + 4).trim(); }
                        data[currentCat].push({ id: count++, term, definition, sentence, sentiment: getSentiment(term) });
                    }
                });
                setParsedData(data); setCategories(Object.keys(data));
            };

            useEffect(() => { parseData(FULL_DATA_SOURCE); }, []);

            // AI Handlers
            const handleGenerateAI = async (item) => {
                if (aiData[item.id] && (aiData[item.id].image || aiData[item.id].loading)) return;
                setAiData(prev => ({ ...prev, [item.id]: { loading: true } }));
                try {
                    const promptData = await generateImagePrompt(item.term, item.definition);
                    if (!promptData) throw new Error("No prompt");
                    setAiData(prev => ({ ...prev, [item.id]: { ...prev[item.id], desc: promptData.chineseDescription } }));
                    const imageUrl = await generateImage(promptData.englishPrompt);
                    setAiData(prev => ({ ...prev, [item.id]: { loading: false, image: imageUrl, desc: promptData.chineseDescription } }));
                } catch (e) {
                    console.error(e);
                    // Capture the specific error message
                    let msg = e.message;
                    if (e.body) {
                        try {
                            const errJson = JSON.parse(e.body);
                            msg = errJson.error.message;
                        } catch (jsonErr) {
                            msg = e.body; // fallback to raw text
                        }
                    }
                    setAiData(prev => ({ ...prev, [item.id]: { loading: false, error: true, errorMessage: msg } }));
                }
            };

            const handleGenerateAllAI = async (currentItems) => {
                if (isGeneratingAll) return;
                setIsGeneratingAll(true);
                const itemsToGen = currentItems.filter(item => !aiData[item.id] || aiData[item.id].error);
                setAiData(prev => {
                    const next = { ...prev };
                    itemsToGen.forEach(item => { next[item.id] = { loading: true }; });
                    return next;
                });
                for (const item of itemsToGen) { await handleGenerateAI(item); }
                setIsGeneratingAll(false);
            };

            const handleStartQuiz = (category, pageIdx = 0, isMistakeMode = false) => {
                if (!isLocked) { setShowNameWarning(true); return; }
                let questions = [];
                if (isMistakeMode) {
                    const mistakeIds = mistakeLog.map(m => m.id);
                    questions = allItems.filter(i => mistakeIds.includes(i.id));
                    questions.sort(() => Math.random() - 0.5);
                } else {
                    let sourceItems = category === 'æ”¶è—å¤¾' ? allItems.filter(i => favorites.includes(i.id)) : parsedData[category];
                    if (!sourceItems) return;
                    const start = pageIdx * ITEMS_PER_PAGE;
                    questions = sourceItems.slice(start, start + ITEMS_PER_PAGE);
                }
                if (questions.length === 0) { alert(isMistakeMode ? "ç›®å‰æ²’æœ‰éŒ¯é¡Œç´€éŒ„ï¼" : "æ­¤é é¢ç„¡é¡Œç›®"); return; }
                const quizSet = questions.map(item => {
                    let pool = allItems.filter(i => i.id !== item.id);
                    const distractors = pool.sort(() => Math.random() - 0.5).slice(0, 3);
                    const options = [...distractors, item].sort(() => Math.random() - 0.5);
                    return { ...item, options, userAnswer: null, isCorrect: null };
                });
                setQuizQuestions(quizSet); setQuizScore(0); setCombo(0); setQuizPage(pageIdx);
                setActiveCategory(isMistakeMode ? 'éŒ¯é¡Œæœ¬' : category); setCurrentMode('quiz');
            };

            const handleQuizPageChange = (newPage) => {
                handleStartQuiz(activeCategory, newPage, activeCategory === 'éŒ¯é¡Œæœ¬');
            };

            const handleAnswer = (qIndex, selectedOptionId) => {
                const newQuestions = [...quizQuestions];
                const q = newQuestions[qIndex];
                if (q.userAnswer !== null) return;
                const isCorrect = selectedOptionId === q.id;
                q.userAnswer = selectedOptionId; q.isCorrect = isCorrect;
                if (isCorrect) { setQuizScore(s => s + 1); setCombo(c => c + 1); playSoundEffect('correct'); confetti({ particleCount: 50, spread: 60, origin: { y: 0.7 } }); } 
                else { 
                    setCombo(0); 
                    playSoundEffect('wrong'); 
                    // FORCE UPDATE & SAVE
                    setMistakeLog(prev => { 
                        const existing = prev.find(m => m.id === q.id); 
                        const newLog = existing ? prev.map(m => m.id === q.id ? { ...m, count: m.count + 1, lastMissed: new Date().toISOString() } : m) : [...prev, { id: q.id, count: 1, lastMissed: new Date().toISOString() }]; 
                        localStorage.setItem('idiomMistakes', JSON.stringify(newLog)); // Force save
                        return newLog;
                    }); 
                }
                setQuizQuestions(newQuestions);
            };

            const finishQuiz = () => {
                const record = { id: Date.now(), date: new Date().toLocaleString(), userName, score: quizScore, total: quizQuestions.length, category: activeCategory, details: quizQuestions.map(q => ({ term: q.term, definition: q.definition, sentence: q.sentence, isCorrect: q.isCorrect, userAnswer: q.options.find(o => o.id === q.userAnswer)?.term || "æœªä½œç­”", correctAnswer: q.term })) };
                
                setHistoryLog(prev => {
                    const newLog = [record, ...prev];
                    localStorage.setItem('idiomHistory', JSON.stringify(newLog));
                    return newLog;
                });

                if (activeCategory !== 'æ”¶è—å¤¾' && activeCategory !== 'éŒ¯é¡Œæœ¬') { 
                    const key = `${activeCategory}-${quizPage}`; 
                    if (!completedDays.includes(key)) { 
                        setCompletedDays(prev => {
                            const newDays = [...prev, key];
                            localStorage.setItem('idiomCompletedDays', JSON.stringify(newDays));
                            return newDays;
                        }); 
                    } 
                }
            };

            return (
                <div className="min-h-screen bg-slate-100 text-gray-900 p-4 md:p-8 flex flex-col">
                    {currentMode === 'menu' && (
                        <MenuView 
                            userName={userName} setUserName={setUserName} showNameWarning={showNameWarning}
                            mistakeLog={mistakeLog} favorites={favorites} categories={categories} parsedData={parsedData}
                            onStartLearn={(cat) => { setActiveCategory(cat); setLearnPage(0); setCurrentMode('learn'); }}
                            onStartQuiz={(cat) => handleStartQuiz(cat, 0)}
                            onViewHistory={() => setCurrentMode('history')}
                            onViewMistakes={() => setCurrentMode('mistakes')}
                            onLogin={handleLogin} isLocked={isLocked} onQuickLogin={handleQuickLogin} lastUser={lastUser}
                        />
                    )}
                    {currentMode === 'learn' && (
                        <LearnView 
                            activeCategory={activeCategory}
                            items={activeCategory === 'æ”¶è—å¤¾' ? allItems.filter(i => favorites.includes(i.id)) : parsedData[activeCategory]}
                            learnPage={learnPage} setLearnPage={setLearnPage}
                            favorites={favorites} toggleFavorite={toggleFavorite}
                            completedDays={completedDays}
                            onMenu={() => setCurrentMode('menu')}
                            onGenerateAll={handleGenerateAllAI}
                            isGeneratingAll={isGeneratingAll}
                            aiData={aiData}
                        />
                    )}
                    {currentMode === 'quiz' && (
                        <QuizView 
                            questions={quizQuestions} score={quizScore} userName={userName} combo={combo}
                            onAnswer={handleAnswer} onFinish={finishQuiz}
                            onMenu={() => setCurrentMode('menu')}
                            onViewHistory={() => setCurrentMode('history')}
                            favorites={favorites} toggleFavorite={toggleFavorite}
                            activeCategory={activeCategory}
                            totalItems={activeCategory === 'æ”¶è—å¤¾' ? favorites.length : (parsedData[activeCategory]?.length || 0)}
                            quizPage={quizPage}
                            onPageChange={handleQuizPageChange}
                            completedDays={completedDays}
                        />
                    )}
                    {currentMode === 'history' && <HistoryView historyLog={historyLog} setHistoryLog={setHistoryLog} onMenu={() => setCurrentMode('menu')} />}
                    {currentMode === 'mistakes' && (
                        <MistakeView 
                            mistakes={allItems.filter(i => mistakeLog.some(m => m.id === i.id))}
                            mistakeLog={mistakeLog} setMistakeLog={setMistakeLog}
                            onMenu={() => setCurrentMode('menu')}
                            onReviewAll={() => handleStartQuiz(null, 0, true)}
                        />
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>